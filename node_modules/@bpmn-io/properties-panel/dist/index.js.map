{"version":3,"file":"index.js","sources":["../src/components/Header.js","../src/context/DescriptionContext.js","../src/context/ErrorsContext.js","../src/context/EventContext.js","../src/context/FeelLanguageContext.js","../src/context/LayoutContext.js","../src/context/TooltipContext.js","../src/hooks/useTooltipContext.js","../src/components/entries/Tooltip.js","../src/hooks/useDescriptionContext.js","../src/hooks/useDebounce.js","../src/hooks/useError.js","../src/hooks/useEvent.js","../src/hooks/useKeyFactory.js","../src/hooks/useLayoutState.js","../src/hooks/usePrevious.js","../src/hooks/useShowEntryEvent.js","../src/hooks/useStickyIntersectionObserver.js","../src/hooks/useStaticCallback.js","../src/hooks/useElementVisible.js","../src/components/Group.js","../src/components/Placeholder.js","../src/PropertiesPanel.js","../src/components/DropdownButton.js","../src/components/HeaderButton.js","../src/components/util/translateFallback.js","../src/components/entries/Collapsible.js","../src/components/ListItem.js","../src/components/ListGroup.js","../src/components/entries/Description.js","../src/components/entries/Checkbox.js","../src/components/OpenPopupButton.js","../src/components/entries/templating/TemplatingEditor.js","../src/components/entries/FEEL/FeelEditor.js","../src/components/entries/FEEL/FeelIndicator.js","../src/components/entries/FEEL/FeelIcon.js","../src/components/entries/ToggleSwitch.js","../src/components/entries/NumberField.js","../src/components/entries/FEEL/Feel.js","../src/components/entries/templating/Templating.js","../src/components/entries/List.js","../src/components/entries/Select.js","../src/components/entries/Simple.js","../src/components/entries/TextArea.js","../src/components/entries/TextField.js","../src/features/debounce-input/debounceInput.js","../src/features/debounce-input/index.js","../src/components/util/dragger.js","../src/features/feel-popup/components/Popup.js","../src/features/feel-popup/components/FeelPopup.js","../src/features/feel-popup/components/helpers.js","../src/features/feel-popup/FeelPopup.js","../src/features/feel-popup/FeelPopupRenderer.js","../src/features/feel-popup/index.js"],"sourcesContent":["import { ExternalLinkIcon } from './icons';\n\n/**\n * @typedef { {\n *  getElementLabel: (element: object) => string,\n *  getTypeLabel: (element: object) => string,\n *  getElementIcon: (element: object) => import('preact').Component,\n *  getDocumentationRef: (element: object) => string\n * } } HeaderProvider\n */\n\n/**\n * @param {Object} props\n * @param {Object} props.element,\n * @param {HeaderProvider} props.headerProvider\n */\nexport default function Header(props) {\n\n  const {\n    element,\n    headerProvider\n  } = props;\n\n  const {\n    getElementIcon,\n    getDocumentationRef,\n    getElementLabel,\n    getTypeLabel,\n  } = headerProvider;\n\n  const label = getElementLabel(element);\n  const type = getTypeLabel(element);\n  const documentationRef = getDocumentationRef && getDocumentationRef(element);\n\n  const ElementIcon = getElementIcon(element);\n\n  return (<div class=\"bio-properties-panel-header\">\n    <div class=\"bio-properties-panel-header-icon\">\n      { ElementIcon && <ElementIcon width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" /> }\n    </div>\n    <div class=\"bio-properties-panel-header-labels\">\n      <div title={ type } class=\"bio-properties-panel-header-type\">{ type }</div>\n      { label ?\n        <div title={ label } class=\"bio-properties-panel-header-label\">{ label }</div> :\n        null\n      }\n    </div>\n    <div class=\"bio-properties-panel-header-actions\">\n      { documentationRef ?\n        <a\n          rel=\"noreferrer\"\n          class=\"bio-properties-panel-header-link\"\n          href={ documentationRef }\n          title=\"Open documentation\"\n          target=\"_blank\">\n          <ExternalLinkIcon />\n        </a> :\n        null\n      }\n    </div>\n  </div>);\n}","import {\n  createContext\n} from 'preact';\n\nconst DescriptionContext = createContext({\n  description: {},\n  getDescriptionForId: () => {}\n});\n\nexport default DescriptionContext;\n","import {\n  createContext\n} from 'preact';\n\nconst ErrorsContext = createContext({\n  errors: {}\n});\n\nexport default ErrorsContext;","/**\n * @typedef {Function} <propertiesPanel.showEntry> callback\n *\n * @example\n *\n * useEvent('propertiesPanel.showEntry', ({ focus = false, ...rest }) => {\n *   // ...\n * });\n *\n * @param {Object} context\n * @param {boolean} [context.focus]\n *\n * @returns void\n */\n\n/**\n * @typedef {Function} <propertiesPanel.showError> callback\n *\n * @example\n *\n * useEvent('propertiesPanel.showError', ({ focus = false, message, ...rest }) => {\n *   // ...\n * });\n *\n * @param {Object} context\n * @param {string} context.message\n * @param {boolean} [context.focus]\n *\n * @returns void\n */\n\nimport { createContext } from 'preact';\n\nconst EventContext = createContext({ eventBus: null });\n\nexport default EventContext;\n","import {\n  createContext\n} from 'preact';\n\n/**\n * @typedef { {\n *   parserDialect?: import('@bpmn-io/feel-editor').ParserDialect,\n *   builtins?: import('@bpmn-io/feel-editor').Variable[],\n *   dialect?: import('@bpmn-io/feel-editor').Dialect\n * } } FeelLanguageContextType\n */\n\n/**\n * @type {import('preact').Context<FeelLanguageContextType>}\n */\nconst FeelLanguageContext = createContext({});\n\nexport default FeelLanguageContext;\n","import {\n  createContext\n} from 'preact';\n\nconst LayoutContext = createContext({\n  layout: {},\n  setLayout: () => {},\n  getLayoutForKey: () => {},\n  setLayoutForKey: () => {}\n});\n\nexport default LayoutContext;","import {\n  createContext\n} from 'preact';\n\nconst TooltipContext = createContext({\n  tooltip: {},\n  getTooltipForId: () => {}\n});\n\nexport default TooltipContext;\n","import {\n  useContext\n} from 'preact/hooks';\n\nimport {\n  TooltipContext\n} from '../context';\n\n/**\n * Accesses the global TooltipContext and returns a tooltip for a given id and element.\n *\n * @example\n * ```jsx\n * function TextField(props) {\n *   const tooltip = useTooltipContext('input1', element);\n * }\n * ```\n *\n * @param {string} id\n * @param {object} element\n *\n * @returns {string}\n */\nexport function useTooltipContext(id, element) {\n  const {\n    getTooltipForId\n  } = useContext(TooltipContext);\n\n  return getTooltipForId(id, element);\n}\n","import {\n  useRef,\n  useState\n} from 'preact/hooks';\n\nimport { useTooltipContext } from '../../hooks/useTooltipContext';\n\nimport { createPortal } from 'preact/compat';\n\n/**\n * @param {Object} props\n * @param {String} props.forId\n * @param {String} props.value\n */\nexport default function TooltipWrapper(props) {\n  const {\n    forId,\n    element\n  } = props;\n\n  const contextDescription = useTooltipContext(forId, element);\n\n  const value = props.value || contextDescription;\n\n  if (!value) {\n    return props.children;\n  }\n\n  return <Tooltip { ...props } value={ value } forId={ `bio-properties-panel-${ forId }` } />;\n}\n\nfunction Tooltip(props) {\n  const {\n    forId,\n    value,\n    parent,\n    direction = 'right',\n    position\n  } = props;\n\n  const [ visible, setVisible ] = useState(false);\n\n  // Tooltip will be shown after SHOW_DELAY ms from hovering over the source element.\n  const SHOW_DELAY = 200;\n  let timeout = null;\n\n  const wrapperRef = useRef(null);\n  const tooltipRef = useRef(null);\n\n  const show = (_, delay) => {\n    if (visible) return;\n\n    if (delay) {\n      timeout = setTimeout(() => {\n        setVisible(true);\n      }, SHOW_DELAY);\n    } else {\n      setVisible(true);\n    }\n  };\n\n  const hide = () => {\n    clearTimeout(timeout);\n    setVisible(false);\n  };\n\n  const handleMouseLeave = ({ relatedTarget }) => {\n\n    // Don't hide the tooltip when moving mouse between the wrapper and the tooltip.\n    if (relatedTarget === wrapperRef.current || relatedTarget === tooltipRef.current || relatedTarget?.parentElement === tooltipRef.current) {\n      return;\n    }\n\n    hide();\n  };\n\n  const handleFocusOut = (e) => {\n    const { target } = e;\n\n    // Don't hide the tooltip if the wrapper or the tooltip itself is clicked.\n    const isHovered = target.matches(':hover') || tooltipRef.current?.matches(':hover');\n\n    if (target === wrapperRef.current && isHovered) {\n      e.stopPropagation();\n      return;\n    }\n\n    hide();\n  };\n\n  const hideTooltipViaEscape = (e) => {\n    e.code === 'Escape' && hide();\n  };\n\n  const renderTooltip = () => {\n    return (\n      <div\n        class={ `bio-properties-panel-tooltip ${direction}` }\n        role=\"tooltip\"\n        id=\"bio-properties-panel-tooltip\"\n        aria-labelledby={ forId }\n        style={ position || getTooltipPosition(wrapperRef.current) }\n        ref={ tooltipRef }\n        onClick={ (e)=> e.stopPropagation() }\n        onMouseLeave={ handleMouseLeave }\n      >\n        <div class=\"bio-properties-panel-tooltip-content\">\n          {value}\n        </div>\n        <div class=\"bio-properties-panel-tooltip-arrow\" />\n      </div>\n    );};\n\n  return (\n    <div class=\"bio-properties-panel-tooltip-wrapper\" tabIndex=\"0\"\n      ref={ wrapperRef }\n      onMouseEnter={ (e) => show(e, true) }\n      onMouseLeave={ handleMouseLeave }\n      onFocus={ show }\n      onBlur={ handleFocusOut }\n      onKeyDown={ hideTooltipViaEscape }\n    >\n      {props.children}\n      {visible ?\n        (parent ?\n          createPortal(renderTooltip(), parent.current)\n          : renderTooltip()\n        ) : null\n      }\n    </div>\n  );\n}\n\n\n// helper\n\nfunction getTooltipPosition(refElement) {\n  const refPosition = refElement.getBoundingClientRect();\n\n  const right = `calc(100% - ${refPosition.x}px)`;\n  const top = `${refPosition.top - 10}px`;\n\n  return `right: ${right}; top: ${top};`;\n}\n","import {\n  useContext\n} from 'preact/hooks';\n\nimport {\n  DescriptionContext\n} from '../context';\n\n/**\n * Accesses the global DescriptionContext and returns a description for a given id and element.\n *\n * @example\n * ```jsx\n * function TextField(props) {\n *   const description = useDescriptionContext('input1', element);\n * }\n * ```\n *\n * @param {string} id\n * @param {object} element\n *\n * @returns {string}\n */\nexport function useDescriptionContext(id, element) {\n  const {\n    getDescriptionForId\n  } = useContext(DescriptionContext);\n\n  return getDescriptionForId(id, element);\n}\n","import {\n  useCallback,\n  useEffect\n} from 'preact/hooks';\n\nexport function useDebounce(callback, debounceFn) {\n  const debouncedCallback = useCallback(debounceFn(callback), [ callback, debounceFn ]);\n\n  // make sure previous call is not stalled\n  useEffect(() => {\n    return () => {\n      debouncedCallback.cancel?.();\n    };\n  }, [ debouncedCallback ]);\n\n  return debouncedCallback;\n}\n","import { useContext } from 'preact/hooks';\n\nimport { ErrorsContext } from '../context';\n\nexport function useError(id) {\n  const { errors } = useContext(ErrorsContext);\n\n  return errors[ id ];\n}\n\nexport function useErrors() {\n  const { errors } = useContext(ErrorsContext);\n\n  return errors;\n}","import { useContext, useEffect, useRef } from 'preact/hooks';\n\nimport { EventContext } from '../context';\n\n\n/**\n * Subscribe to an event immediately. Update subscription after inputs changed.\n *\n * @param {string} event\n * @param {Function} callback\n */\nexport function useEvent(event, callback, eventBus) {\n  const eventContext = useContext(EventContext);\n\n  if (!eventBus) {\n    ({ eventBus } = eventContext);\n  }\n\n  const didMount = useRef(false);\n\n  // (1) subscribe immediately\n  if (eventBus && !didMount.current) {\n    eventBus.on(event, callback);\n  }\n\n  // (2) update subscription after inputs changed\n  useEffect(() => {\n    if (eventBus && didMount.current) {\n      eventBus.on(event, callback);\n    }\n\n    didMount.current = true;\n\n    return () => {\n      if (eventBus) {\n        eventBus.off(event, callback);\n      }\n    };\n  }, [ callback, event, eventBus ]);\n}\n","import { useMemo } from 'preact/hooks';\n\nconst KEY_LENGTH = 6;\n\n/**\n * Create a persistent key factory for plain objects without id.\n *\n * @example\n * ```jsx\n * function List({ objects }) {\n *   const getKey = useKeyFactory();\n *   return (<ol>{\n *     objects.map(obj => {\n *       const key = getKey(obj);\n *       return <li key={key}>obj.name</li>\n *     })\n *   }</ol>);\n * }\n * ```\n *\n * @param {any[]} dependencies\n * @returns {(element: object) => string}\n */\nexport function useKeyFactory(dependencies = []) {\n  const map = useMemo(() => new Map(), dependencies);\n\n  const getKey = el => {\n    let key = map.get(el);\n\n    if (!key) {\n      key = Math.random().toString().slice(-KEY_LENGTH);\n      map.set(el, key);\n    }\n\n    return key;\n  };\n\n  return getKey;\n}\n","import {\n  useCallback,\n  useContext\n} from 'preact/hooks';\n\nimport {\n  LayoutContext\n} from '../context';\n\n/**\n * Creates a state that persists in the global LayoutContext.\n *\n * @example\n * ```jsx\n * function Group(props) {\n *   const [ open, setOpen ] = useLayoutState([ 'groups', 'foo', 'open' ], false);\n * }\n * ```\n *\n * @param {(string|number)[]} path\n * @param {any} [defaultValue]\n *\n * @returns {[ any, Function ]}\n */\nexport function useLayoutState(path, defaultValue) {\n  const {\n    getLayoutForKey,\n    setLayoutForKey\n  } = useContext(LayoutContext);\n\n  const layoutForKey = getLayoutForKey(path, defaultValue);\n\n  const setState = useCallback((newValue) => {\n    setLayoutForKey(path, newValue);\n  }, [ setLayoutForKey ]);\n\n\n  return [ layoutForKey, setState ];\n}\n","import {\n  useEffect,\n  useRef\n} from 'preact/hooks';\n\n/**\n * @pinussilvestrus: we need to introduce our own hook to persist the previous\n * state on updates.\n *\n * cf. https://reactjs.org/docs/hooks-faq.html#how-to-get-the-previous-props-or-state\n */\n\nexport function usePrevious(value) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}","import {\n  useCallback,\n  useContext,\n  useEffect,\n  useRef\n} from 'preact/hooks';\n\nimport { isFunction } from 'min-dash';\n\nimport { PropertiesPanelContext } from '../context';\n\nimport { useEvent } from './useEvent';\n\n/**\n * Subscribe to `propertiesPanel.showEntry`.\n *\n * @param {string} id\n *\n * @returns {import('preact').Ref}\n */\nexport function useShowEntryEvent(id) {\n  const { onShow } = useContext(PropertiesPanelContext);\n\n  const ref = useRef();\n\n  const focus = useRef(false);\n\n  const onShowEntry = useCallback((event) => {\n    if (event.id === id) {\n      onShow();\n\n      if (!focus.current) {\n        focus.current = true;\n      }\n    }\n  }, [ id ]);\n\n  useEffect(() => {\n    if (focus.current && ref.current) {\n      if (isFunction(ref.current.focus)) {\n        ref.current.focus();\n      }\n\n      if (isFunction(ref.current.select)) {\n        ref.current.select();\n      }\n\n      focus.current = false;\n    }\n  });\n\n  useEvent('propertiesPanel.showEntry', onShowEntry);\n\n  return ref;\n}","import {\n  useCallback,\n  useEffect,\n  useState\n} from 'preact/hooks';\n\nimport {\n  query as domQuery\n} from 'min-dom';\n\nimport { useEvent } from './useEvent';\n\n\n/**\n * @callback setSticky\n * @param {boolean} value\n */\n\n/**\n * Use IntersectionObserver to identify when DOM element is in sticky mode.\n * If sticky is observered setSticky(true) will be called.\n * If sticky mode is left, setSticky(false) will be called.\n *\n *\n * @param {Object} ref\n * @param {string} scrollContainerSelector\n * @param {setSticky} setSticky\n */\nexport function useStickyIntersectionObserver(ref, scrollContainerSelector, setSticky) {\n\n  const [ scrollContainer, setScrollContainer ] = useState(domQuery(scrollContainerSelector));\n\n  const updateScrollContainer = useCallback(() => {\n    const newScrollContainer = domQuery(scrollContainerSelector);\n\n    if (newScrollContainer !== scrollContainer) {\n      setScrollContainer(newScrollContainer);\n    }\n  }, [ scrollContainerSelector, scrollContainer ]);\n\n  useEffect(() => {\n    updateScrollContainer();\n  }, [ updateScrollContainer ]);\n\n  useEvent('propertiesPanel.attach', updateScrollContainer);\n  useEvent('propertiesPanel.detach', updateScrollContainer);\n\n  useEffect(() => {\n    const Observer = IntersectionObserver;\n\n    // return early if IntersectionObserver is not available\n    if (!Observer) {\n      return;\n    }\n\n    // TODO(@barmac): test this\n    if (!ref.current || !scrollContainer) {\n      return;\n    }\n\n    const observer = new Observer((entries) => {\n\n      // scroll container is unmounted, do not update sticky state\n      if (scrollContainer.scrollHeight === 0) {\n        return;\n      }\n\n      entries.forEach(entry => {\n        if (entry.intersectionRatio < 1) {\n          setSticky(true);\n        }\n        else if (entry.intersectionRatio === 1) {\n          setSticky(false);\n        }\n      });\n    },\n    {\n      root: scrollContainer,\n      rootMargin: '0px 0px 999999% 0px', // Use bottom margin to avoid stickyness when scrolling out to bottom\n      threshold: [ 1 ]\n    });\n    observer.observe(ref.current);\n\n    // Unobserve if unmounted\n    return () => {\n      observer.unobserve(ref.current);\n    };\n\n  }, [ ref.current, scrollContainer, setSticky ]);\n}\n","import { useCallback, useRef } from 'preact/hooks';\n\n/**\n * Creates a static function reference with changing body.\n * This is necessary when external libraries require a callback function\n * that has references to state variables.\n *\n * Usage:\n * const callback = useStaticCallback((val) => {val === currentState});\n *\n * The `callback` reference is static and can be safely used in external\n * libraries or as a prop that does not cause rerendering of children.\n *\n * @param {Function} callback function with changing reference\n * @returns {Function} static function reference\n */\nexport function useStaticCallback(callback) {\n  const callbackRef = useRef(callback);\n  callbackRef.current = callback;\n\n  return useCallback(\n    (...args) => callbackRef.current(...args),\n    []\n  );\n}","import { useLayoutEffect, useState } from 'preact/hooks';\n\nexport function useElementVisible(element) {\n\n  const [ visible, setVisible ] = useState(!!element && !!element.clientHeight);\n\n  useLayoutEffect(() => {\n    if (!element) return;\n\n    const resizeObserver = new ResizeObserver(([ entry ]) => {\n      requestAnimationFrame(() => {\n        const newVisible = !!entry.contentRect.height;\n        if (newVisible !== visible) {\n          setVisible(newVisible);\n        }\n      });\n    });\n\n    resizeObserver.observe(element);\n\n    return () => resizeObserver.disconnect();\n  }, [ element, visible ]);\n\n  return visible;\n}\n","import {\n  useCallback,\n  useContext,\n  useEffect,\n  useRef,\n  useState\n} from 'preact/hooks';\n\nimport Tooltip from './entries/Tooltip';\n\nimport classnames from 'classnames';\n\nimport {\n  query as domQuery\n} from 'min-dom';\n\nimport {\n  isFunction\n} from 'min-dash';\n\nimport {\n  useErrors,\n  useLayoutState\n} from '../hooks';\n\nimport { PropertiesPanelContext } from '../context';\n\nimport { useStickyIntersectionObserver } from '../hooks';\n\nimport { ArrowIcon } from './icons';\n\n/**\n * @param {import('../PropertiesPanel').GroupDefinition} props\n */\nexport default function Group(props) {\n  const {\n    element,\n    entries = [],\n    id,\n    label,\n    shouldOpen = false,\n  } = props;\n\n  const groupRef = useRef(null);\n\n  const [ open, setOpen ] = useLayoutState(\n    [ 'groups', id, 'open' ],\n    shouldOpen\n  );\n\n  const onShow = useCallback(() => setOpen(true), [ setOpen ]);\n\n  const toggleOpen = () => setOpen(!open);\n\n  const [ edited, setEdited ] = useState(false);\n\n  const [ sticky, setSticky ] = useState(false);\n\n  // set edited state depending on all entries\n  useEffect(() => {\n\n    // TODO(@barmac): replace with CSS when `:has()` is supported in all major browsers, or rewrite as in https://github.com/camunda/camunda-modeler/issues/3815#issuecomment-1733038161\n    const scheduled = requestAnimationFrame(() => {\n      const hasOneEditedEntry = entries.find(entry => {\n        const {\n          id,\n          isEdited\n        } = entry;\n\n        const entryNode = domQuery(`[data-entry-id=\"${id}\"]`);\n\n        if (!isFunction(isEdited) || !entryNode) {\n          return false;\n        }\n\n        const inputNode = domQuery('.bio-properties-panel-input', entryNode);\n\n        return isEdited(inputNode);\n      });\n\n      setEdited(hasOneEditedEntry);\n    });\n\n    return () => cancelAnimationFrame(scheduled);\n  }, [ entries, setEdited ]);\n\n  // set error state depending on all entries\n  const allErrors = useErrors();\n  const hasErrors = entries.some(entry => allErrors[entry.id]);\n\n  // set css class when group is sticky to top\n  useStickyIntersectionObserver(groupRef, 'div.bio-properties-panel-scroll-container', setSticky);\n\n  const propertiesPanelContext = {\n    ...useContext(PropertiesPanelContext),\n    onShow\n  };\n\n  return <div class=\"bio-properties-panel-group\" data-group-id={ 'group-' + id } ref={ groupRef }>\n    <div class={ classnames(\n      'bio-properties-panel-group-header',\n      edited ? '' : 'empty',\n      open ? 'open' : '',\n      (sticky && open) ? 'sticky' : ''\n    ) } onClick={ toggleOpen }>\n      <div\n        title={ props.tooltip ? null : label }\n        data-title={ label }\n        class=\"bio-properties-panel-group-header-title\"\n      >\n        <Tooltip value={ props.tooltip } forId={ 'group-' + id } element={ element } parent={ groupRef }>\n          { label }\n        </Tooltip>\n      </div>\n      <div class=\"bio-properties-panel-group-header-buttons\">\n        {\n          <DataMarker\n            edited={ edited }\n            hasErrors={ hasErrors }\n          />\n        }\n        <button\n          type=\"button\"\n          title=\"Toggle section\"\n          class=\"bio-properties-panel-group-header-button bio-properties-panel-arrow\"\n        >\n          <ArrowIcon class={ open ? 'bio-properties-panel-arrow-down' : 'bio-properties-panel-arrow-right' } />\n        </button>\n      </div>\n    </div>\n    <div class={ classnames(\n      'bio-properties-panel-group-entries',\n      open ? 'open' : ''\n    ) }>\n      <PropertiesPanelContext.Provider value={ propertiesPanelContext }>\n        {\n          entries.map(entry => {\n            const {\n              component: Component,\n              id\n            } = entry;\n\n            return (\n              <Component\n                { ...entry }\n                element={ element }\n                key={ id } />\n            );\n          })\n        }\n      </PropertiesPanelContext.Provider>\n    </div>\n  </div>;\n}\n\nfunction DataMarker(props) {\n  const {\n    edited,\n    hasErrors\n  } = props;\n\n  if (hasErrors) {\n    return (\n      <div title=\"Section contains an error\" class=\"bio-properties-panel-dot bio-properties-panel-dot--error\"></div>\n    );\n  }\n\n  if (edited) {\n    return (\n      <div title=\"Section contains edits\" class=\"bio-properties-panel-dot\"></div>\n    );\n  }\n  return null;\n}","/**\n * @typedef { {\n *  text: (element: object) => string,\n *  icon?: (element: Object) => import('preact').Component\n * } } PlaceholderDefinition\n *\n * @param { PlaceholderDefinition } props\n */\nexport default function Placeholder(props) {\n  const {\n    text,\n    icon: Icon\n  } = props;\n\n  return (\n    <div class=\"bio-properties-panel open\">\n      <section class=\"bio-properties-panel-placeholder\">\n        { Icon && <Icon class=\"bio-properties-panel-placeholder-icon\" /> }\n        <p class=\"bio-properties-panel-placeholder-text\">{ text }</p>\n      </section>\n    </div>\n  );\n}","import {\n  useState,\n  useEffect,\n  useMemo,\n  useRef,\n  useLayoutEffect\n} from 'preact/hooks';\n\nimport {\n  assign,\n  get,\n  isArray,\n  set\n} from 'min-dash';\n\nimport Header from './components/Header';\n\nimport Group from './components/Group';\n\nimport Placeholder from './components/Placeholder';\n\nimport {\n  DescriptionContext,\n  ErrorsContext,\n  EventContext,\n  LayoutContext,\n  PropertiesPanelContext,\n  TooltipContext\n} from './context';\n\nimport { useEvent } from './hooks';\n\nconst DEFAULT_LAYOUT = {};\n\nconst DEFAULT_DESCRIPTION = {};\n\nconst DEFAULT_TOOLTIP = {};\n\n\n/**\n * @typedef { {\n *    component: import('preact').Component,\n *    id: String,\n *    isEdited?: Function\n * } } EntryDefinition\n *\n * @typedef { {\n *    autoFocusEntry: String,\n *    autoOpen?: Boolean,\n *    entries: Array<EntryDefinition>,\n *    id: String,\n *    label: String,\n *    remove: (event: MouseEvent) => void\n * } } ListItemDefinition\n *\n * @typedef { {\n *    add: (event: MouseEvent) => void,\n *    component: import('preact').Component,\n *    element: Object,\n *    id: String,\n *    items: Array<ListItemDefinition>,\n *    label: String,\n *    shouldOpen?: Boolean\n * } } ListGroupDefinition\n *\n * @typedef { {\n *    component?: import('preact').Component,\n *    entries: Array<EntryDefinition>,\n *    id: String,\n *    label: String,\n *    shouldOpen?: Boolean\n * } } GroupDefinition\n *\n *  @typedef { {\n *    [id: String]: GetDescriptionFunction\n * } } DescriptionConfig\n *\n *  @typedef { {\n *    [id: String]: GetTooltipFunction\n * } } TooltipConfig\n *\n * @callback { {\n * @param {string} id\n * @param {Object} element\n * @returns {string}\n * } } GetDescriptionFunction\n *\n * @callback { {\n * @param {string} id\n * @param {Object} element\n * @returns {string}\n * } } GetTooltipFunction\n *\n * @typedef { {\n *  getEmpty: (element: object) => import('./components/Placeholder').PlaceholderDefinition,\n *  getMultiple: (element: Object) => import('./components/Placeholder').PlaceholderDefinition\n * } } PlaceholderProvider\n *\n */\n\n\n/**\n * A basic properties panel component. Describes *how* content will be rendered, accepts\n * data from implementor to describe *what* will be rendered.\n *\n * @param {Object} props\n * @param {Object|Array} props.element\n * @param {import('./components/Header').HeaderProvider} props.headerProvider\n * @param {PlaceholderProvider} [props.placeholderProvider]\n * @param {Array<GroupDefinition|ListGroupDefinition>} props.groups\n * @param {Object} [props.layoutConfig]\n * @param {Function} [props.layoutChanged]\n * @param {DescriptionConfig} [props.descriptionConfig]\n * @param {Function} [props.descriptionLoaded]\n * @param {TooltipConfig} [props.tooltipConfig]\n * @param {Function} [props.tooltipLoaded]\n * @param {HTMLElement} [props.feelPopupContainer]\n * @param {Function} [props.getFeelPopupLinks]\n * @param {Object} [props.eventBus]\n */\nexport default function PropertiesPanel(props) {\n  const {\n    element,\n    headerProvider,\n    placeholderProvider,\n    groups,\n    layoutConfig,\n    layoutChanged,\n    descriptionConfig,\n    descriptionLoaded,\n    tooltipConfig,\n    tooltipLoaded,\n    eventBus\n  } = props;\n\n  // set-up layout context\n  const [ layout, setLayout ] = useState(createLayout(layoutConfig));\n\n  // react to external changes in the layout config\n  useUpdateLayoutEffect(() => {\n    const newLayout = createLayout(layoutConfig);\n\n    setLayout(newLayout);\n  }, [ layoutConfig ]);\n\n  useEffect(() => {\n    if (typeof layoutChanged === 'function') {\n      layoutChanged(layout);\n    }\n  }, [ layout, layoutChanged ]);\n\n  const getLayoutForKey = (key, defaultValue) => {\n    return get(layout, key, defaultValue);\n  };\n\n  const setLayoutForKey = (key, config) => {\n    const newLayout = assign({}, layout);\n    set(newLayout, key, config);\n    setLayout(newLayout);\n  };\n\n  const layoutContext = {\n    layout,\n    setLayout,\n    getLayoutForKey,\n    setLayoutForKey\n  };\n\n  // set-up description context\n  const description = useMemo(() => createDescriptionContext(descriptionConfig), [ descriptionConfig ]);\n\n  useEffect(() => {\n    if (typeof descriptionLoaded === 'function') {\n      descriptionLoaded(description);\n    }\n  }, [ description, descriptionLoaded ]);\n\n\n  const getDescriptionForId = (id, element) => {\n    return description[id] && description[id](element);\n  };\n\n  const descriptionContext = {\n    description,\n    getDescriptionForId\n  };\n\n  // set-up tooltip context\n  const tooltip = useMemo(() => createTooltipContext(tooltipConfig), [ tooltipConfig ]);\n\n  useEffect(() => {\n    if (typeof tooltipLoaded === 'function') {\n      tooltipLoaded(tooltip);\n    }\n  }, [ tooltip, tooltipLoaded ]);\n\n  const getTooltipForId = (id, element) => {\n    return tooltip[id] && tooltip[id](element);\n  };\n\n  const tooltipContext = {\n    tooltip,\n    getTooltipForId\n  };\n\n  const [ errors, setErrors ] = useState({});\n\n  const onSetErrors = ({ errors }) => setErrors(errors);\n\n  useEvent('propertiesPanel.setErrors', onSetErrors, eventBus);\n\n  const errorsContext = {\n    errors\n  };\n\n  const eventContext = {\n    eventBus\n  };\n\n  const propertiesPanelContext = {\n    element\n  };\n\n  // empty state\n  if (placeholderProvider && !element) {\n    return <Placeholder { ...placeholderProvider.getEmpty() } />;\n  }\n\n  // multiple state\n  if (placeholderProvider && isArray(element)) {\n    return <Placeholder { ...placeholderProvider.getMultiple() } />;\n  }\n\n  return (\n    <PropertiesPanelContext.Provider value={ propertiesPanelContext }>\n      <ErrorsContext.Provider value={ errorsContext }>\n        <DescriptionContext.Provider value={ descriptionContext }>\n          <TooltipContext.Provider value={ tooltipContext }>\n            <LayoutContext.Provider value={ layoutContext }>\n              <EventContext.Provider value={ eventContext }>\n                <div class=\"bio-properties-panel\">\n                  <Header\n                    element={ element }\n                    headerProvider={ headerProvider } />\n                  <div class=\"bio-properties-panel-scroll-container\">\n                    {\n                      groups.map(group => {\n                        const {\n                          component: Component = Group,\n                          id\n                        } = group;\n\n                        return (\n                          <Component\n                            { ...group }\n                            key={ id }\n                            element={ element } />\n                        );\n                      })\n                    }\n                  </div>\n                </div>\n              </EventContext.Provider>\n            </LayoutContext.Provider>\n          </TooltipContext.Provider>\n        </DescriptionContext.Provider>\n      </ErrorsContext.Provider>\n    </PropertiesPanelContext.Provider>\n  );\n}\n\n\n// helpers //////////////////\n\nfunction createLayout(overrides = {}, defaults = DEFAULT_LAYOUT) {\n  return {\n    ...defaults,\n    ...overrides\n  };\n}\n\nfunction createDescriptionContext(overrides = {}) {\n  return {\n    ...DEFAULT_DESCRIPTION,\n    ...overrides\n  };\n}\n\nfunction createTooltipContext(overrides = {}) {\n  return {\n    ...DEFAULT_TOOLTIP,\n    ...overrides\n  };\n}\n\n// hooks //////////////////\n\n/**\n * This hook behaves like useLayoutEffect, but does not trigger on the first render.\n *\n * @param {Function} effect\n * @param {Array} deps\n */\nfunction useUpdateLayoutEffect(effect, deps) {\n  const isMounted = useRef(false);\n\n  useLayoutEffect(() => {\n    if (isMounted.current) {\n      return effect();\n    } else {\n      isMounted.current = true;\n    }\n  }, deps);\n}","import {\n  useEffect,\n  useRef,\n  useState\n} from 'preact/hooks';\n\nimport classnames from 'classnames';\n\n/**\n *\n * @param {object} props\n * @param {string} [props.class]\n * @param {import('preact').Component[]} [props.menuItems]\n * @returns\n */\nexport function DropdownButton(props) {\n  const {\n    class: className,\n    children,\n    menuItems = []\n  } = props;\n\n  const dropdownRef = useRef(null);\n  const menuRef = useRef(null);\n\n  const [ open, setOpen ] = useState(false);\n  const close = () => setOpen(false);\n\n  function onDropdownToggle(event) {\n    if (menuRef.current && menuRef.current.contains(event.target)) {\n      return;\n    }\n\n    event.stopPropagation();\n\n    setOpen(open => !open);\n  }\n\n  function onActionClick(event, action) {\n    event.stopPropagation();\n\n    close();\n    action();\n  }\n\n  useGlobalClick([ dropdownRef.current ], () => close());\n\n  return (\n    <div\n      class={ classnames('bio-properties-panel-dropdown-button', { open }, className) }\n      onClick={ onDropdownToggle }\n      ref={ dropdownRef }\n    >\n      { children }\n      <div class=\"bio-properties-panel-dropdown-button__menu\" ref={ menuRef }>\n        { menuItems.map((item, index) => (\n          <MenuItem onClick={ onActionClick } item={ item } key={ index } />\n        )) }\n      </div>\n    </div>\n  );\n}\n\nfunction MenuItem({ item, onClick }) {\n  if (item.separator) {\n    return <div class=\"bio-properties-panel-dropdown-button__menu-item bio-properties-panel-dropdown-button__menu-item--separator\" />;\n  }\n\n  if (item.action) {\n    return (<button\n      type=\"button\"\n      class=\"bio-properties-panel-dropdown-button__menu-item bio-properties-panel-dropdown-button__menu-item--actionable\"\n      onClick={ event => onClick(event, item.action) }\n    >\n      {item.entry}\n    </button>);\n  }\n\n  return <div\n    class=\"bio-properties-panel-dropdown-button__menu-item\"\n  >\n    {item.entry}\n  </div>;\n}\n\n/**\n *\n * @param {Array<null | Element>} ignoredElements\n * @param {Function} callback\n */\nfunction useGlobalClick(ignoredElements, callback) {\n  useEffect(() => {\n\n    /**\n     * @param {MouseEvent} event\n     */\n    function listener(event) {\n      if (ignoredElements.some(element => element && element.contains(event.target))) {\n        return;\n      }\n\n      callback();\n    }\n\n    document.addEventListener('click', listener, { capture: true });\n\n    return () => document.removeEventListener('click', listener, { capture: true });\n  }, [ ...ignoredElements, callback ]);\n}\n","import classnames from 'classnames';\n\nexport function HeaderButton(props) {\n  const {\n    children = null,\n    class: classname,\n    onClick = () => {},\n    ...otherProps\n  } = props;\n\n  return <button\n    type=\"button\"\n    { ...otherProps }\n    onClick={ onClick }\n    class={ classnames('bio-properties-panel-group-header-button', classname) }>\n    { children }\n  </button>;\n}\n","/**\n * @typedef { {\n *   [key: string]: string;\n * } } TranslateReplacements\n */\n\n/**\n * A simple translation stub to be used for multi-language support.\n * Can be easily replaced with a more sophisticated solution.\n *\n * @param {string} template to interpolate\n * @param {TranslateReplacements} [replacements] a map with substitutes\n *\n * @return {string} the translated string\n */\nexport default function translateFallback(template, replacements) {\n\n  replacements = replacements || {};\n\n  return template.replace(/{([^}]+)}/g, function(_, key) {\n    return replacements[key] || '{' + key + '}';\n  });\n}","import {\n  useCallback,\n  useContext,\n  useState\n} from 'preact/hooks';\n\nimport classnames from 'classnames';\n\nimport { isFunction } from 'min-dash';\n\nimport {\n  ArrowIcon,\n  DeleteIcon,\n} from '../icons';\n\nimport { PropertiesPanelContext } from '../../context';\n\nimport translateFallback from '../util/translateFallback';\n\n\nexport default function CollapsibleEntry(props) {\n  const {\n    element,\n    entries = [],\n    id,\n    label,\n    open: shouldOpen,\n    remove,\n    translate = translateFallback\n  } = props;\n\n  const [ open, setOpen ] = useState(shouldOpen);\n\n  const toggleOpen = () => setOpen(!open);\n\n  const { onShow } = useContext(PropertiesPanelContext);\n\n  const propertiesPanelContext = {\n    ...useContext(PropertiesPanelContext),\n    onShow: useCallback(() => {\n      setOpen(true);\n\n      if (isFunction(onShow)) {\n        onShow();\n      }\n    }, [ onShow, setOpen ])\n  };\n\n\n  const placeholderLabel = translate('<empty>');\n\n  return (\n    <div\n      data-entry-id={ id }\n      class={ classnames(\n        'bio-properties-panel-collapsible-entry',\n        open ? 'open' : ''\n      ) }>\n      <div class=\"bio-properties-panel-collapsible-entry-header\" onClick={ toggleOpen }>\n        <div\n          title={ label || placeholderLabel }\n          class={ classnames(\n            'bio-properties-panel-collapsible-entry-header-title',\n            !label && 'empty'\n          ) }>\n          { label || placeholderLabel }\n        </div>\n        <button\n          type=\"button\"\n          title={ translate('Toggle list item') }\n          class=\"bio-properties-panel-arrow  bio-properties-panel-collapsible-entry-arrow\"\n        >\n          <ArrowIcon class={ open ? 'bio-properties-panel-arrow-down' : 'bio-properties-panel-arrow-right' } />\n        </button>\n        {\n          remove\n            ?\n            (\n              <button type=\"button\" title={ translate('Delete item') } class=\"bio-properties-panel-remove-entry\" onClick={ remove }>\n                <DeleteIcon />\n              </button>\n            )\n            : null\n        }\n      </div>\n      <div class={ classnames(\n        'bio-properties-panel-collapsible-entry-entries',\n        open ? 'open' : ''\n      ) }>\n        <PropertiesPanelContext.Provider value={ propertiesPanelContext }>\n          {\n            entries.map(entry => {\n              const {\n                component: Component,\n                id\n              } = entry;\n\n              return (\n                <Component\n                  { ...entry }\n                  element={ element }\n                  key={ id } />\n              );\n            })\n          }\n        </PropertiesPanelContext.Provider>\n      </div>\n    </div>\n  );\n}","import {\n  useEffect\n} from 'preact/hooks';\n\nimport {\n  query as domQuery\n} from 'min-dom';\n\nimport { isFunction } from 'min-dash';\n\nimport CollapsibleEntry from './entries/Collapsible';\nimport translateFallback from './util/translateFallback';\n\n/**\n * @param {import('../PropertiesPanel').ListItemDefinition} props\n */\nexport default function ListItem(props) {\n  const {\n    autoFocusEntry,\n    autoOpen,\n    translate = translateFallback\n  } = props;\n\n  // focus specified entry on auto open\n  useEffect(() => {\n    if (autoOpen && autoFocusEntry) {\n      const entry = domQuery(`[data-entry-id=\"${autoFocusEntry}\"]`);\n\n      const focusableInput = domQuery('.bio-properties-panel-input', entry);\n\n      if (focusableInput) {\n\n        if (isFunction(focusableInput.select)) {\n          focusableInput.select();\n        } else if (isFunction(focusableInput.focus)) {\n          focusableInput.focus();\n        }\n\n        focusableInput.scrollIntoView();\n      }\n    }\n  }, [ autoOpen, autoFocusEntry ]);\n\n\n  return (\n    <div class=\"bio-properties-panel-list-item\">\n      <CollapsibleEntry\n        { ...props }\n        open={ autoOpen }\n        translate={ translate }\n      />\n    </div>\n  );\n\n}\n","import {\n  useCallback,\n  useContext,\n  useEffect,\n  useRef,\n  useState\n} from 'preact/hooks';\n\nimport Tooltip from './entries/Tooltip';\n\nimport classnames from 'classnames';\n\nimport {\n  useErrors,\n  useLayoutState,\n  usePrevious\n} from '../hooks';\n\nimport ListItem from './ListItem';\n\nimport {\n  ArrowIcon,\n  CreateIcon\n} from './icons';\n\nimport { PropertiesPanelContext } from '../context';\n\nimport { useStickyIntersectionObserver } from '../hooks';\n\nimport translateFallback from './util/translateFallback';\n\nconst noop = () => {};\n\n/**\n * @param {import('../PropertiesPanel').ListGroupDefinition} props\n */\nexport default function ListGroup(props) {\n  const {\n    add,\n    element,\n    id,\n    items,\n    label,\n    shouldOpen = false,\n    translate = translateFallback\n  } = props;\n\n  useEffect(() => {\n    if (props.shouldSort != undefined) {\n      console.warn('the property \\'shouldSort\\' is no longer supported');\n    }\n  }, [ props.shouldSort ]);\n\n  const groupRef = useRef(null);\n\n  const [ open, setOpen ] = useLayoutState(\n    [ 'groups', id, 'open' ],\n    shouldOpen\n  );\n\n  const [ sticky, setSticky ] = useState(false);\n\n  const onShow = useCallback(() => setOpen(true), [ setOpen ]);\n\n  const [ localItems, setLocalItems ] = useState([]);\n\n  // Flag to mark that add button was clicked in the last render cycle\n  const [ addTriggered, setAddTriggered ] = useState(false);\n\n  const prevElement = usePrevious(element);\n\n  const toggleOpen = useCallback(() => setOpen(!open), [ open ]);\n\n  const openItemIds = (element === prevElement && open && addTriggered)\n    ? getNewItemIds(items, localItems)\n    : [];\n\n  // reset local state after items changed\n  useEffect(() => {\n    setLocalItems(items);\n    setAddTriggered(false);\n  }, [ items ]);\n\n  // set css class when group is sticky to top\n  useStickyIntersectionObserver(groupRef, 'div.bio-properties-panel-scroll-container', setSticky);\n\n  const hasItems = !!items.length;\n\n  const propertiesPanelContext = {\n    ...useContext(PropertiesPanelContext),\n    onShow\n  };\n\n  const handleAddClick = e => {\n    setAddTriggered(true);\n    setOpen(true);\n\n    add(e);\n  };\n\n  const allErrors = useErrors();\n  const hasError = items.some(item => {\n    if (allErrors[item.id]) {\n      return true;\n    }\n\n    if (!item.entries) {\n      return;\n    }\n\n    // also check if the error is nested, e.g. for name-value entries\n    return item.entries.some(entry => allErrors[entry.id]);\n  });\n\n\n  return <div class=\"bio-properties-panel-group\" data-group-id={ 'group-' + id } ref={ groupRef }>\n    <div\n      class={ classnames(\n        'bio-properties-panel-group-header',\n        hasItems ? '' : 'empty',\n        (hasItems && open) ? 'open' : '',\n        (sticky && open) ? 'sticky' : ''\n      ) }\n      onClick={ hasItems ? toggleOpen : noop }>\n      <div\n        title={ props.tooltip ? null : label }\n        data-title={ label }\n        class=\"bio-properties-panel-group-header-title\"\n      >\n        <Tooltip value={ props.tooltip } forId={ 'group-' + id } element={ element } parent={ groupRef }>\n          { label }\n        </Tooltip>\n      </div>\n      <div class=\"bio-properties-panel-group-header-buttons\">\n        {\n          add\n            ? (\n              <button\n                type=\"button\"\n                title={ translate('Create new list item') }\n                class=\"bio-properties-panel-group-header-button bio-properties-panel-add-entry\"\n                onClick={ handleAddClick }\n              >\n                <CreateIcon />\n                {\n                  !hasItems ? (\n                    <span class=\"bio-properties-panel-add-entry-label\">{ translate('Create') }</span>\n                  )\n                    : null\n                }\n              </button>\n            )\n            : null\n        }\n        {\n          hasItems\n            ? (\n              <div\n                title={ translate(`List contains {numOfItems} item${items.length != 1 ? 's' : ''}`, { numOfItems: items.length }) }\n                class={\n                  classnames(\n                    'bio-properties-panel-list-badge',\n                    hasError ? 'bio-properties-panel-list-badge--error' : ''\n                  )\n                }\n              >\n                { items.length }\n              </div>\n            )\n            : null\n        }\n        {\n          hasItems\n            ? (\n              <button\n                type=\"button\"\n                title={ translate('Toggle section') }\n                class=\"bio-properties-panel-group-header-button bio-properties-panel-arrow\"\n              >\n                <ArrowIcon class={ open ? 'bio-properties-panel-arrow-down' : 'bio-properties-panel-arrow-right' } />\n              </button>\n            )\n            : null\n        }\n      </div>\n    </div>\n    <div class={ classnames(\n      'bio-properties-panel-list',\n      open && hasItems ? 'open' : ''\n    ) }>\n      <PropertiesPanelContext.Provider value={ propertiesPanelContext }>\n\n        {\n          items.map((item, index) => {\n            if (!item) {\n              return;\n            }\n\n            const { id } = item;\n\n            // if item was added, open it\n            // existing items will not be affected as autoOpen\n            // is only applied on first render\n            const autoOpen = openItemIds.includes(item.id);\n\n            return (\n              <ListItem\n                { ...item }\n                autoOpen={ autoOpen }\n                element={ element }\n                index={ index }\n                key={ id }\n                translate={ translate } />\n            );\n          })\n        }\n      </PropertiesPanelContext.Provider>\n    </div>\n  </div>;\n}\n\n\nfunction getNewItemIds(newItems, oldItems) {\n  const newIds = newItems.map(item => item.id);\n  const oldIds = oldItems.map(item => item.id);\n\n  return newIds.filter(itemId => !oldIds.includes(itemId));\n}","import {\n  useDescriptionContext\n} from '../../hooks';\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.forId - id of the entry the description is used for\n * @param {String} props.value\n */\nexport default function Description(props) {\n  const {\n    element,\n    forId,\n    value\n  } = props;\n\n  const contextDescription = useDescriptionContext(forId, element);\n\n  const description = value || contextDescription;\n\n  if (description) {\n    return (\n      <div class=\"bio-properties-panel-description\">\n        { description }\n      </div>\n    );\n  }\n}\n","import {\n  useError,\n  useShowEntryEvent\n} from '../../hooks';\n\nimport {\n  useEffect,\n  useState\n} from 'preact/hooks';\n\nimport Description from './Description';\nimport Tooltip from './Tooltip';\n\nfunction Checkbox(props) {\n  const {\n    id,\n    label,\n    onChange,\n    disabled,\n    value = false,\n    onFocus,\n    onBlur,\n    tooltip\n  } = props;\n\n  const [ localValue, setLocalValue ] = useState(value);\n\n  const handleChangeCallback = ({ target }) => {\n    onChange(target.checked);\n  };\n\n  const handleChange = e => {\n    handleChangeCallback(e);\n    setLocalValue(e.target.value);\n  };\n\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n\n    setLocalValue(value);\n  }, [ value ]);\n\n  const ref = useShowEntryEvent(id);\n\n  return (\n    <div class=\"bio-properties-panel-checkbox\">\n      <input\n        ref={ ref }\n        id={ prefixId(id) }\n        name={ id }\n        onFocus={ onFocus }\n        onBlur={ onBlur }\n        type=\"checkbox\"\n        class=\"bio-properties-panel-input\"\n        onChange={ handleChange }\n        checked={ localValue }\n        disabled={ disabled } />\n      <label for={ prefixId(id) } class=\"bio-properties-panel-label\">\n        <Tooltip value={ tooltip } forId={ id } element={ props.element }>\n          { label }\n        </Tooltip>\n      </label>\n    </div>\n  );\n}\n\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {string|import('preact').Component} props.tooltip\n * @param {boolean} [props.disabled]\n */\nexport default function CheckboxEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    label,\n    getValue,\n    setValue,\n    disabled,\n    onFocus,\n    onBlur,\n    tooltip\n  } = props;\n\n  const value = getValue(element);\n\n  const error = useError(id);\n\n  return (\n    <div class=\"bio-properties-panel-entry bio-properties-panel-checkbox-entry\" data-entry-id={ id }>\n      <Checkbox\n        disabled={ disabled }\n        id={ id }\n        key={ element }\n        label={ label }\n        onChange={ setValue }\n        onFocus={ onFocus }\n        onBlur={ onBlur }\n        value={ value }\n        tooltip={ tooltip }\n        element={ element } />\n      { error && <div class=\"bio-properties-panel-error\">{ error }</div> }\n      <Description forId={ id } element={ element } value={ description } />\n    </div>\n  );\n}\n\nexport function isEdited(node) {\n  return node && !!node.checked;\n}\n\n\n// helpers /////////////////\n\nfunction prefixId(id) {\n  return `bio-properties-panel-${ id }`;\n}\n","import { OpenPopupIcon } from './icons';\n\n/**\n * Button to open popups.\n *\n * @param {Object} props\n * @param {Function} props.onClick - Callback to trigger when the button is clicked.\n * @param {string} [props.title] - Tooltip text for the button.\n * @param {boolean} [props.disabled] - Whether the button is disabled.\n * @param {string} [props.className] - Additional class names for the button.\n */\nexport function OpenPopupButton({\n  onClick,\n  title = 'Open pop-up editor',\n}) {\n  return (\n    <button\n      type=\"button\"\n      title={ title }\n      class={ 'bio-properties-panel-open-feel-popup' }\n      onClick={ onClick }\n    >\n      <OpenPopupIcon />\n    </button>\n  );\n}\n","import classNames from 'classnames';\nimport { useEffect, useMemo, useRef, useState } from 'preact/hooks';\nimport { forwardRef } from 'preact/compat';\n\nimport { FeelersEditor } from 'feelers';\nimport { useStaticCallback } from '../../../hooks';\n\nimport { OpenPopupButton } from '../../OpenPopupButton';\n\nconst noop = () => {};\n\n/**\n * Buffer `.focus()` calls while the editor is not initialized.\n * Set Focus inside when the editor is ready.\n */\nconst useBufferedFocus = function(editor, ref) {\n\n  const [ buffer, setBuffer ] = useState(undefined);\n\n  ref.current = useMemo(() => ({\n    focus: (offset) => {\n      if (editor) {\n        editor.focus(offset);\n      } else {\n        if (typeof offset === 'undefined') {\n          offset = Infinity;\n        }\n        setBuffer(offset);\n      }\n    }\n  }), [ editor ]);\n\n  useEffect(() => {\n    if (typeof buffer !== 'undefined' && editor) {\n      editor.focus(buffer);\n      setBuffer(false);\n    }\n  }, [ editor, buffer ]);\n};\n\nconst TemplatingEditor = forwardRef((props, ref) => {\n\n  const {\n    onInput,\n    disabled,\n    tooltipContainer,\n    enableGutters,\n    value,\n    onLint = noop,\n    onOpenPopup = noop,\n    popupOpen,\n    contentAttributes = {},\n    hostLanguage = null,\n    singleLine = false\n  } = props;\n\n  const inputRef = useRef();\n  const [ editor, setEditor ] = useState();\n  const [ localValue, setLocalValue ] = useState(value || '');\n\n  useBufferedFocus(editor, ref);\n\n  const handleInput = useStaticCallback(newValue => {\n    onInput(newValue);\n    setLocalValue(newValue);\n  });\n\n  useEffect(() => {\n\n    let editor;\n\n    editor = new FeelersEditor({\n      container: inputRef.current,\n      onChange: handleInput,\n      value: localValue,\n      onLint,\n      contentAttributes,\n      tooltipContainer,\n      enableGutters,\n      hostLanguage,\n      singleLine,\n      lineWrap: true,\n    });\n\n    setEditor(\n      editor\n    );\n\n    return () => {\n      onLint([]);\n      inputRef.current.innerHTML = '';\n      setEditor(null);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (!editor) {\n      return;\n    }\n\n    if (value === localValue) {\n      return;\n    }\n\n    editor.setValue(value);\n    setLocalValue(value);\n  }, [ value ]);\n\n  const handleClick = () => {\n    ref.current.focus();\n  };\n\n  return <div class={ classNames(\n    'bio-properties-panel-feelers-editor-container',\n    popupOpen ? 'popupOpen' : null\n  ) }>\n    {\n      popupOpen && <div class=\"bio-properties-panel-feelers-editor__popup-placeholder\">Opened in popup</div>\n    }\n    <div\n      name={ props.name }\n      class={ classNames('bio-properties-panel-feelers-editor bio-properties-panel-input', localValue ? 'edited' : null, disabled ? 'disabled' : null) }\n      ref={ inputRef }\n      onClick={ handleClick }\n    ></div>\n    {!disabled && <OpenPopupButton\n      onClick={ () => onOpenPopup('feelers') }\n    /> }\n  </div>;\n});\n\nexport default TemplatingEditor;","import classNames from 'classnames';\nimport { useEffect, useMemo, useRef, useState } from 'preact/hooks';\nimport { forwardRef } from 'preact/compat';\n\nimport Editor from '@bpmn-io/feel-editor';\n\nimport { EditorView, lineNumbers } from '@codemirror/view';\n\nimport { useStaticCallback } from '../../../hooks';\n\nimport { OpenPopupButton } from '../../OpenPopupButton';\n\nconst noop = () => {};\n\n/**\n * Buffer `.focus()` calls while the editor is not initialized.\n * Set Focus inside when the editor is ready.\n */\nconst useBufferedFocus = function(editor, ref) {\n\n  const [ buffer, setBuffer ] = useState(undefined);\n\n  ref.current = useMemo(() => ({\n    focus: (offset) => {\n      if (editor) {\n        editor.focus(offset);\n      } else {\n        if (typeof offset === 'undefined') {\n          offset = Infinity;\n        }\n        setBuffer(offset);\n      }\n    }\n  }), [ editor ]);\n\n  useEffect(() => {\n    if (typeof buffer !== 'undefined' && editor) {\n      editor.focus(buffer);\n      setBuffer(false);\n    }\n  }, [ editor, buffer ]);\n};\n\nconst FeelEditor = forwardRef((props, ref) => {\n\n  const {\n    contentAttributes,\n    enableGutters,\n    value,\n    onInput,\n    onFeelToggle = noop,\n    onLint = noop,\n    onOpenPopup = noop,\n    placeholder,\n    popupOpen,\n    disabled,\n    tooltipContainer,\n    variables,\n    feelLanguageContext\n  } = props;\n\n  const inputRef = useRef();\n  const [ editor, setEditor ] = useState();\n  const [ localValue, setLocalValue ] = useState(value || '');\n\n  const {\n    builtins,\n    dialect,\n    parserDialect\n  } = feelLanguageContext || {};\n\n  useBufferedFocus(editor, ref);\n\n  const handleInput = useStaticCallback(newValue => {\n    onInput(newValue);\n    setLocalValue(newValue);\n  });\n\n  useEffect(() => {\n\n    let editor;\n\n    /* Trigger FEEL toggle when\n     *\n     * - `backspace` is pressed\n     * - AND the cursor is at the beginning of the input\n     */\n    const onKeyDown = e => {\n      if (e.key !== 'Backspace' || !editor) {\n        return;\n      }\n\n      const selection = editor.getSelection();\n      const range = selection.ranges[selection.mainIndex];\n\n      if (range.from === 0 && range.to === 0) {\n        onFeelToggle();\n      }\n    };\n\n    editor = new Editor({\n      container: inputRef.current,\n      onChange: handleInput,\n      onKeyDown: onKeyDown,\n      onLint: onLint,\n      placeholder: placeholder,\n      tooltipContainer: tooltipContainer,\n      value: localValue,\n      variables,\n      builtins,\n      dialect,\n      parserDialect,\n      extensions: [\n        ...enableGutters ? [ lineNumbers() ] : [],\n        EditorView.lineWrapping\n      ],\n      contentAttributes\n    });\n\n    setEditor(\n      editor\n    );\n\n    return () => {\n      onLint([]);\n      inputRef.current.innerHTML = '';\n      setEditor(null);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (!editor) {\n      return;\n    }\n\n    if (value === localValue) {\n      return;\n    }\n\n    editor.setValue(value);\n    setLocalValue(value);\n  }, [ value ]);\n\n  useEffect(() => {\n    if (!editor) {\n      return;\n    }\n\n    editor.setVariables(variables);\n  }, [ variables ]);\n\n  useEffect(() => {\n    if (!editor) {\n      return;\n    }\n\n    editor.setPlaceholder(placeholder);\n  }, [ placeholder ]);\n\n  const handleClick = () => {\n    ref.current.focus();\n  };\n\n  return <div class={ classNames(\n    'bio-properties-panel-feel-editor-container',\n    disabled ? 'disabled' : null,\n    popupOpen ? 'popupOpen' : null)\n  }>\n    {\n      popupOpen && <div class=\"bio-properties-panel-feel-editor__open-popup-placeholder\">Opened in editor</div>\n    }\n    <div\n      name={ props.name }\n      class={ classNames('bio-properties-panel-input', localValue ? 'edited' : null) }\n      ref={ inputRef }\n      onClick={ handleClick }\n    ></div>\n    {!disabled && <OpenPopupButton\n      onClick={ () => onOpenPopup('feel') }\n    /> }\n  </div>;\n});\n\nexport default FeelEditor;","export function FeelIndicator(props) {\n  const {\n    active\n  } = props;\n\n  if (!active) {\n    return null;\n  }\n\n  return <span class=\"bio-properties-panel-feel-indicator\">\n    =\n  </span>;\n}","import classNames from 'classnames';\nimport { FeelIcon as FeelIconSvg } from '../../icons';\n\nconst noop = () => {};\n\n/**\n * @param {Object} props\n * @param {Object} props.label\n * @param {String} props.feel\n */\nexport default function FeelIcon(props) {\n\n  const {\n    feel = false,\n    active,\n    disabled = false,\n    onClick = noop\n  } = props;\n\n  const feelRequiredLabel = 'FEEL expression is mandatory';\n  const feelOptionalLabel = `Click to ${active ? 'remove' : 'set a'} dynamic value with FEEL expression`;\n\n  const handleClick = e => {\n    onClick(e);\n\n    // when pointer event was created from keyboard, keep focus on button\n    if (!e.pointerType) {\n      e.stopPropagation();\n    }\n  };\n\n  return (\n    <button\n      type=\"button\"\n      class={ classNames('bio-properties-panel-feel-icon',\n        active ? 'active' : null,\n        feel === 'required' ? 'required' : 'optional') }\n      onClick={ handleClick }\n      disabled={ feel === 'required' || disabled }\n      title={\n        feel === 'required' ? feelRequiredLabel : feelOptionalLabel\n      }\n    >\n      <FeelIconSvg />\n    </button>\n  );\n}","import Description from './Description';\n\nimport {\n  useEffect,\n  useState\n} from 'preact/hooks';\n\nimport classNames from 'classnames';\nimport Tooltip from './Tooltip';\n\nexport function ToggleSwitch(props) {\n  const {\n    id,\n    label,\n    onInput,\n    value,\n    switcherLabel,\n    inline,\n    onFocus,\n    onBlur,\n    inputRef,\n    tooltip\n  } = props;\n\n  const [ localValue, setLocalValue ] = useState(value);\n\n  const handleInputCallback = async () => {\n    onInput(!value);\n  };\n\n  const handleInput = e => {\n    handleInputCallback(e);\n    setLocalValue(e.target.value);\n  };\n\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n\n    setLocalValue(value);\n  }, [ value ]);\n\n  return (\n    <div class={ classNames(\n      'bio-properties-panel-toggle-switch',\n      { inline }\n    ) }>\n      <label class=\"bio-properties-panel-label\"\n        for={ prefixId(id) }>\n        <Tooltip value={ tooltip } forId={ id } element={ props.element }>\n          { label }\n        </Tooltip>\n      </label>\n      <div class=\"bio-properties-panel-field-wrapper\">\n        <label class=\"bio-properties-panel-toggle-switch__switcher\">\n          <input\n            ref={ inputRef }\n            id={ prefixId(id) }\n            class=\"bio-properties-panel-input\"\n            type=\"checkbox\"\n            onFocus={ onFocus }\n            onBlur={ onBlur }\n            name={ id }\n            onInput={ handleInput }\n            checked={ !!localValue } />\n          <span class=\"bio-properties-panel-toggle-switch__slider\" />\n        </label>\n        { switcherLabel && <p class=\"bio-properties-panel-toggle-switch__label\">{ switcherLabel }</p> }\n      </div>\n    </div>\n  );\n}\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {String} props.label\n * @param {String} props.switcherLabel\n * @param {Boolean} props.inline\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {string|import('preact').Component} props.tooltip\n */\nexport default function ToggleSwitchEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    label,\n    switcherLabel,\n    inline,\n    getValue,\n    setValue,\n    onFocus,\n    onBlur,\n    tooltip\n  } = props;\n\n  const value = getValue(element);\n  return (\n    <div class=\"bio-properties-panel-entry bio-properties-panel-toggle-switch-entry\" data-entry-id={ id }>\n      <ToggleSwitch\n        id={ id }\n        label={ label }\n        value={ value }\n        onInput={ setValue }\n        onFocus={ onFocus }\n        onBlur={ onBlur }\n        switcherLabel={ switcherLabel }\n        inline={ inline }\n        tooltip={ tooltip }\n        element={ element } />\n      <Description forId={ id } element={ element } value={ description } />\n    </div>\n  );\n}\n\nexport function isEdited(node) {\n  return node && !!node.checked;\n}\n\n\n// helpers /////////////////\n\nfunction prefixId(id) {\n  return `bio-properties-panel-${ id }`;\n}\n","import Description from './Description';\nimport Tooltip from './Tooltip';\n\nimport {\n  useEffect,\n  useMemo,\n  useState\n} from 'preact/hooks';\n\nimport classnames from 'classnames';\n\nimport { isFunction } from 'min-dash';\n\nimport {\n  useError\n} from '../../hooks';\n\nexport function NumberField(props) {\n\n  const {\n    debounce,\n    disabled,\n    displayLabel = true,\n    id,\n    inputRef,\n    label,\n    max,\n    min,\n    onInput,\n    step,\n    value = '',\n    onFocus,\n    onBlur,\n    tooltip\n  } = props;\n\n  const [ localValue, setLocalValue ] = useState(value);\n\n  const handleInputCallback = useMemo(() => {\n    return debounce((target) => {\n\n      if (target.validity.valid) {\n        onInput(target.value ? parseFloat(target.value) : undefined);\n      }\n    });\n  }, [ onInput, debounce ]);\n\n  const handleInput = e => {\n    handleInputCallback(e.target);\n    setLocalValue(e.target.value);\n  };\n\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n\n    setLocalValue(value);\n  }, [ value ]);\n\n  return (\n    <div class=\"bio-properties-panel-numberfield\">\n      {displayLabel && (\n        <label for={ prefixId(id) } class=\"bio-properties-panel-label\">\n          <Tooltip value={ tooltip } forId={ id } element={ props.element }>\n            { label }\n          </Tooltip>\n        </label>\n      )}\n      <input\n        id={ prefixId(id) }\n        ref={ inputRef }\n        type=\"number\"\n        name={ id }\n        spellCheck=\"false\"\n        autoComplete=\"off\"\n        disabled={ disabled }\n        class=\"bio-properties-panel-input\"\n        max={ max }\n        min={ min }\n        onInput={ handleInput }\n        onFocus={ onFocus }\n        onBlur={ onBlur }\n        step={ step }\n        value={ localValue } />\n    </div>\n  );\n}\n\n/**\n * @param {Object} props\n * @param {Boolean} props.debounce\n * @param {String} props.description\n * @param {Boolean} props.disabled\n * @param {Object} props.element\n * @param {Function} props.getValue\n * @param {String} props.id\n * @param {String} props.label\n * @param {String} props.max\n * @param {String} props.min\n * @param {Function} props.setValue\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {String} props.step\n * @param {Function} props.validate\n */\nexport default function NumberFieldEntry(props) {\n  const {\n    debounce,\n    description,\n    disabled,\n    element,\n    getValue,\n    id,\n    label,\n    max,\n    min,\n    setValue,\n    step,\n    onFocus,\n    onBlur,\n    validate,\n    tooltip\n  } = props;\n\n  const globalError = useError(id);\n  const [ localError, setLocalError ] = useState(null);\n\n  let value = getValue(element);\n\n  useEffect(() => {\n    if (isFunction(validate)) {\n      const newValidationError = validate(value) || null;\n\n      setLocalError(newValidationError);\n    }\n  }, [ value, validate ]);\n\n  const onInput = (newValue) => {\n    let newValidationError = null;\n\n    if (isFunction(validate)) {\n      newValidationError = validate(newValue) || null;\n    }\n\n    setValue(newValue, newValidationError);\n    setLocalError(newValidationError);\n  };\n\n  const error = globalError || localError;\n\n  return (\n    <div class={ classnames(\n      'bio-properties-panel-entry',\n      error ? 'has-error' : '') } data-entry-id={ id }>\n      <NumberField\n        debounce={ debounce }\n        disabled={ disabled }\n        id={ id }\n        key={ element }\n        label={ label }\n        onFocus={ onFocus }\n        onBlur={ onBlur }\n        onInput={ onInput }\n        max={ max }\n        min={ min }\n        step={ step }\n        value={ value }\n        tooltip={ tooltip }\n      />\n      { error && <div class=\"bio-properties-panel-error\">{ error }</div> }\n      <Description forId={ id } element={ element } value={ description } />\n    </div>\n  );\n}\n\nexport function isEdited(node) {\n  return node && !!node.value;\n}\n\n\n// helpers /////////////////\n\nfunction prefixId(id) {\n  return `bio-properties-panel-${ id }`;\n}\n","import Description from '../Description';\nimport TemplatingEditor from '../templating/TemplatingEditor';\n\nimport {\n  useCallback,\n  useContext,\n  useEffect,\n  useRef,\n  useState\n} from 'preact/hooks';\n\nimport { forwardRef } from 'preact/compat';\n\nimport classnames from 'classnames';\n\nimport { isFunction, isString } from 'min-dash';\n\nimport {\n  useDebounce,\n  useError,\n  useShowEntryEvent,\n  useStaticCallback\n} from '../../../hooks';\n\nimport FeelEditor from './FeelEditor';\nimport { FeelIndicator } from './FeelIndicator';\nimport FeelIcon from './FeelIcon';\n\nimport { EventContext, FeelLanguageContext } from '../../../context';\n\nimport { ToggleSwitch } from '../ToggleSwitch';\n\nimport { NumberField } from '../NumberField';\nimport Tooltip from '../Tooltip';\n\nconst noop = () => {};\n\n/**\n * @typedef {'required'|'optional'|'static'} FeelType\n */\n\n/**\n * @param {Object} props\n * @param {Boolean} props.debounce\n * @param {String} props.id\n * @param {Object} props.element\n * @param {String} props.label\n * @param {String} props.hostLanguage\n * @param {Function} props.onInput\n * @param {Function} props.onBlur\n * @param {Function} props.onError\n * @param {FeelType} [props.feel]\n * @param {String} props.value\n * @param {Boolean} [props.singleLine]\n * @param {Function} props.tooltipContainer\n * @param {Function | import('preact').Component} props.OptionalComponent\n * @param {Boolean} props.disabled\n * @param {Array} props.variables\n * @param {string} [props.placeholder]\n * @param {string | import('preact').Component} props.tooltip\n */\nfunction FeelTextfield(props) {\n  const {\n    debounce,\n    id,\n    element,\n    label,\n    hostLanguage,\n    onInput: commitValue,\n    onBlur,\n    onError,\n    placeholder,\n    feel,\n    value = '',\n    disabled = false,\n    variables,\n    singleLine,\n    tooltipContainer,\n    OptionalComponent = OptionalFeelInput,\n    tooltip\n  } = props;\n\n  const [ localValue, setLocalValue ] = useState(value);\n\n  const editorRef = useShowEntryEvent(id);\n  const containerRef = useRef();\n\n  const onInput = useCallback(newValue => {\n\n    // we don't commit empty FEEL expressions,\n    // but instead serialize them as <undefined>\n    const newModelValue = (newValue === '' || newValue === '=') ? undefined : newValue;\n    commitValue(newModelValue);\n  }, [ commitValue ]);\n\n  const feelActive = (isString(localValue) && localValue.startsWith('=')) || feel === 'required';\n  const feelOnlyValue = (isString(localValue) && localValue.startsWith('=')) ? localValue.substring(1) : localValue;\n  const feelLanguageContext = useContext(FeelLanguageContext);\n\n  const [ focus, _setFocus ] = useState(undefined);\n\n  const {\n    eventBus\n  } = useContext(EventContext);\n\n  const [ isPopupOpen, setIsPopupOpen ] = useState(false);\n\n  const setFocus = (offset = 0) => {\n    const hasFocus = containerRef.current.contains(document.activeElement);\n\n    // Keep caret position if it is already focused, otherwise focus at the end\n    const position = hasFocus ? document.activeElement.selectionStart : Infinity;\n\n    _setFocus(position + offset);\n  };\n\n  /**\n   * @type { import('min-dash').DebouncedFunction }\n   */\n  const handleInput = useDebounce(onInput, debounce);\n\n  const handleFeelToggle = useStaticCallback(() => {\n    if (feel === 'required') {\n      return;\n    }\n\n    if (!feelActive) {\n      setLocalValue('=' + localValue);\n      handleInput('=' + localValue);\n    } else {\n      setLocalValue(feelOnlyValue);\n      handleInput(feelOnlyValue);\n    }\n  });\n\n  const handleLocalInput = (newValue) => {\n    if (feelActive) {\n      newValue = '=' + newValue;\n    }\n\n    if (newValue === localValue) {\n      return;\n    }\n\n    setLocalValue(newValue);\n    handleInput(newValue);\n\n    if (!feelActive && isString(newValue) && newValue.startsWith('=')) {\n\n      // focus is behind `=` sign that will be removed\n      setFocus(-1);\n    }\n  };\n\n  const handleOnBlur = (e) => {\n    if (e.target.type === 'checkbox') {\n      onInput(e.target.checked);\n    } else {\n      const trimmedValue = e.target.value.trim();\n      onInput(trimmedValue);\n    }\n\n    if (onBlur) {\n      onBlur(e);\n    }\n  };\n\n  const handleLint = useStaticCallback((lint = []) => {\n\n    const syntaxError = lint.some(report => report.type === 'Syntax Error');\n\n    if (syntaxError) {\n      onError('Unparsable FEEL expression.');\n    } else {\n      onError(undefined);\n    }\n  });\n\n  const handleOpenPopup = (type = 'feel') => {\n    const isOpen = eventBus.fire('propertiesPanel.openPopup', {\n      element,\n      entryId: id,\n      hostLanguage,\n      label,\n      onInput: handleLocalInput,\n      singleLine,\n      sourceElement: editorRef.current,\n      tooltipContainer,\n      type,\n      value: feelOnlyValue,\n      variables,\n      feelLanguageContext,\n    });\n\n    if (isOpen) {\n      eventBus.once('propertiesPanelPopup.close', () => {\n        setIsPopupOpen(false);\n      });\n    }\n\n    setIsPopupOpen(isOpen === true);\n  };\n\n  useEffect(() => {\n    if (typeof focus !== 'undefined') {\n      editorRef.current.focus(focus);\n      _setFocus(undefined);\n    }\n  }, [ focus ]);\n\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n\n    // External value change removed content => keep FEEL configuration\n    if (!value) {\n      setLocalValue(feelActive ? '=' : '');\n      return;\n    }\n\n    setLocalValue(value);\n  }, [ value ]);\n\n  useEffect(() => {\n    return () => {\n      eventBus.fire('propertiesPanel.closePopup');\n    };\n  }, []);\n\n  // copy-paste integration\n  useEffect(() => {\n    const copyHandler = event => {\n      if (!feelActive) {\n        return;\n      }\n      event.clipboardData.setData('application/FEEL', event.clipboardData.getData('text'));\n    };\n\n    const pasteHandler = event => {\n      if (feelActive || isPopupOpen) {\n        return;\n      }\n\n      const data = event.clipboardData.getData('application/FEEL');\n\n      if (data) {\n        setTimeout(() => {\n          handleFeelToggle();\n          setFocus();\n        });\n      }\n    };\n    containerRef.current.addEventListener('copy', copyHandler);\n    containerRef.current.addEventListener('cut', copyHandler);\n    containerRef.current.addEventListener('paste', pasteHandler);\n\n    return () => {\n      containerRef.current.removeEventListener('copy', copyHandler);\n      containerRef.current.removeEventListener('cut', copyHandler);\n      containerRef.current.removeEventListener('paste', pasteHandler);\n    };\n  }, [ containerRef, feelActive, handleFeelToggle, setFocus ]);\n\n  return (\n    <div class={ classnames(\n      'bio-properties-panel-feel-entry',\n      { 'feel-active': feelActive }\n    ) }>\n      <label for={ prefixId(id) } class=\"bio-properties-panel-label\" onClick={ () => setFocus() }>\n        <Tooltip value={ tooltip } forId={ id } element={ props.element }>\n          {label}\n        </Tooltip>\n        <FeelIcon\n          label={ label }\n          feel={ feel }\n          onClick={ handleFeelToggle }\n          active={ feelActive }></FeelIcon>\n      </label>\n\n      <div class=\"bio-properties-panel-feel-container\" ref={ containerRef }>\n        <FeelIndicator\n          active={ feelActive }\n          disabled={ feel !== 'optional' || disabled }\n          onClick={ handleFeelToggle }\n        />\n        {feelActive ?\n          <FeelEditor\n            name={ id }\n            onInput={ handleLocalInput }\n            contentAttributes={ { 'id': prefixId(id), 'aria-label': label } }\n            disabled={ disabled }\n            popupOpen={ isPopupOpen }\n            onFeelToggle={ () => {\n              handleFeelToggle();\n              setFocus(true);\n            } }\n            onLint={ handleLint }\n            onOpenPopup={ handleOpenPopup }\n            placeholder={ placeholder }\n            value={ feelOnlyValue }\n            variables={ variables }\n            feelLanguageContext={ feelLanguageContext }\n            ref={ editorRef }\n            tooltipContainer={ tooltipContainer }\n          /> :\n          <OptionalComponent\n            { ...props }\n            popupOpen={ isPopupOpen }\n            onInput={ handleLocalInput }\n            onBlur={ handleOnBlur }\n            contentAttributes={ { 'id': prefixId(id), 'aria-label': label } }\n            value={ localValue }\n            ref={ editorRef }\n            onOpenPopup={ handleOpenPopup }\n            containerRef={ containerRef }\n          />\n        }\n      </div>\n    </div>\n  );\n}\n\n\nconst OptionalFeelInput = forwardRef((props, ref) => {\n  const {\n    id,\n    disabled,\n    onInput,\n    value,\n    onFocus,\n    onBlur,\n    placeholder\n  } = props;\n\n  const inputRef = useRef();\n\n  // To be consistent with the FEEL editor, set focus at start of input\n  // this ensures clean editing experience when switching with the keyboard\n  ref.current = {\n    focus: (position) => {\n      const input = inputRef.current;\n      if (!input) {\n        return;\n      }\n\n      input.focus();\n      if (typeof position === 'number') {\n        if (position > value.length) {\n          position = value.length;\n        }\n        input.setSelectionRange(position, position);\n      }\n\n    }\n  };\n\n  return <input\n    id={ prefixId(id) }\n    type=\"text\"\n    ref={ inputRef }\n    name={ id }\n    spellCheck=\"false\"\n    autoComplete=\"off\"\n    disabled={ disabled }\n    class=\"bio-properties-panel-input\"\n    onInput={ e => onInput(e.target.value) }\n    onFocus={ onFocus }\n    onBlur={ onBlur }\n    placeholder={ placeholder }\n    value={ value || '' } />;\n});\n\nconst OptionalFeelNumberField = forwardRef((props, ref) => {\n  const {\n    id,\n    debounce,\n    disabled,\n    onInput,\n    value,\n    min,\n    max,\n    step,\n    onFocus,\n    onBlur\n  } = props;\n\n  const inputRef = useRef();\n\n  // To be consistent with the FEEL editor, set focus at start of input\n  // this ensures clean editing experience when switching with the keyboard\n  ref.current = {\n    focus: (position) => {\n      const input = inputRef.current;\n      if (!input) {\n        return;\n      }\n\n      input.focus();\n      if (typeof position === 'number' && position !== Infinity) {\n        if (position > value.length) {\n          position = value.length;\n        }\n        input.setSelectionRange(position, position);\n      }\n\n    }\n  };\n\n  return <NumberField\n    id={ id }\n    debounce={ debounce }\n    disabled={ disabled }\n    displayLabel={ false }\n    inputRef={ inputRef }\n    max={ max }\n    min={ min }\n    onInput={ onInput }\n    step={ step }\n    value={ value }\n    onFocus={ onFocus }\n    onBlur={ onBlur }\n  />;\n});\n\nconst OptionalFeelTextArea = forwardRef((props, ref) => {\n  const {\n    id,\n    disabled,\n    onInput,\n    value,\n    onFocus,\n    onBlur,\n    placeholder\n  } = props;\n\n  const inputRef = useRef();\n\n  // To be consistent with the FEEL editor, set focus at start of input\n  // this ensures clean editing experience when switching with the keyboard\n  ref.current = {\n    focus: () => {\n      const input = inputRef.current;\n      if (!input) {\n        return;\n      }\n\n      input.focus();\n      input.setSelectionRange(0, 0);\n    }\n  };\n\n  return <textarea\n    id={ prefixId(id) }\n    type=\"text\"\n    ref={ inputRef }\n    name={ id }\n    spellCheck=\"false\"\n    autoComplete=\"off\"\n    disabled={ disabled }\n    class=\"bio-properties-panel-input\"\n    onInput={ e => onInput(e.target.value) }\n    onFocus={ onFocus }\n    onBlur={ onBlur }\n    placeholder={ placeholder }\n    value={ value || '' }\n    data-gramm=\"false\"\n  />;\n});\n\nconst OptionalFeelToggleSwitch = forwardRef((props, ref) => {\n  const {\n    id,\n    onInput,\n    value,\n    onFocus,\n    onBlur,\n    switcherLabel\n  } = props;\n\n  const inputRef = useRef();\n\n  // To be consistent with the FEEL editor, set focus at start of input\n  // this ensures clean editing experience when switching with the keyboard\n  ref.current = {\n    focus: () => {\n      const input = inputRef.current;\n      if (!input) {\n        return;\n      }\n\n      input.focus();\n    }\n  };\n\n  return <ToggleSwitch\n    id={ id }\n    value={ value }\n    inputRef={ inputRef }\n    onInput={ onInput }\n    onFocus={ onFocus }\n    onBlur={ onBlur }\n    switcherLabel={ switcherLabel } />;\n});\n\nconst OptionalFeelCheckbox = forwardRef((props, ref) => {\n  const {\n    id,\n    disabled,\n    onInput,\n    value,\n    onFocus,\n    onBlur\n  } = props;\n\n  const inputRef = useRef();\n\n  const handleChange = ({ target }) => {\n    onInput(target.checked);\n  };\n\n  // To be consistent with the FEEL editor, set focus at start of input\n  // this ensures clean editing experience when switching with the keyboard\n  ref.current = {\n    focus: () => {\n      const input = inputRef.current;\n      if (!input) {\n        return;\n      }\n\n      input.focus();\n    }\n  };\n\n  return <input\n    ref={ inputRef }\n    id={ prefixId(id) }\n    name={ id }\n    onFocus={ onFocus }\n    onBlur={ onBlur }\n    type=\"checkbox\"\n    class=\"bio-properties-panel-input\"\n    onChange={ handleChange }\n    checked={ value }\n    disabled={ disabled } />;\n});\n\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {Boolean} props.debounce\n * @param {Boolean} props.disabled\n * @param {FeelType} [props.feel]\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.tooltipContainer\n * @param {Function} props.validate\n * @param {Function} props.show\n * @param {Function} props.example\n * @param {Array} props.variables\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {string} [props.placeholder]\n * @param {string|import('preact').Component} props.tooltip\n */\nexport default function FeelEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    debounce,\n    disabled,\n    feel,\n    label,\n    getValue,\n    setValue,\n    tooltipContainer,\n    hostLanguage,\n    singleLine,\n    validate,\n    show = noop,\n    example,\n    variables,\n    onFocus,\n    onBlur,\n    placeholder,\n    tooltip\n  } = props;\n\n  const [ validationError, setValidationError ] = useState(null);\n  const [ localError, setLocalError ] = useState(null);\n\n  let value = getValue(element);\n\n  useEffect(() => {\n    if (isFunction(validate)) {\n      const newValidationError = validate(value) || null;\n\n      setValidationError(newValidationError);\n    }\n  }, [ value, validate ]);\n\n  const onInput = useStaticCallback((newValue) => {\n    const value = getValue(element);\n    let newValidationError = null;\n\n    if (isFunction(validate)) {\n      newValidationError = validate(newValue) || null;\n    }\n\n    // don't create multiple commandStack entries for the same value\n    if (newValue !== value) {\n      setValue(newValue, newValidationError);\n    }\n\n    setValidationError(newValidationError);\n  });\n\n  const onError = useCallback(err => {\n    setLocalError(err);\n  }, []);\n\n  const temporaryError = useError(id);\n\n  const error = temporaryError || localError || validationError;\n\n  return (\n    <div\n      class={ classnames(\n        props.class,\n        'bio-properties-panel-entry',\n        error ? 'has-error' : '')\n      }\n      data-entry-id={ id }>\n      <FeelTextfield\n        { ...props }\n        debounce={ debounce }\n        disabled={ disabled }\n        feel={ feel }\n        id={ id }\n        key={ element }\n        label={ label }\n        onInput={ onInput }\n        onError={ onError }\n        onFocus={ onFocus }\n        onBlur={ onBlur }\n        placeholder={ placeholder }\n        example={ example }\n        hostLanguage={ hostLanguage }\n        singleLine={ singleLine }\n        show={ show }\n        value={ value }\n        variables={ variables }\n        tooltipContainer={ tooltipContainer }\n        OptionalComponent={ props.OptionalComponent }\n        tooltip={ tooltip } />\n      {error && <div class=\"bio-properties-panel-error\">{error}</div>}\n      <Description forId={ id } element={ element } value={ description } />\n    </div>\n  );\n}\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {Boolean} props.debounce\n * @param {Boolean} props.disabled\n * @param {String} props.max\n * @param {String} props.min\n * @param {String} props.step\n * @param {FeelType} [props.feel]\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.tooltipContainer\n * @param {Function} props.validate\n * @param {Function} props.show\n * @param {Function} props.example\n * @param {Array} props.variables\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n */\nexport function FeelNumberEntry(props) {\n  return <FeelEntry class=\"bio-properties-panel-feel-number\" OptionalComponent={ OptionalFeelNumberField } { ...props } />;\n}\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {Boolean} props.debounce\n * @param {Boolean} props.disabled\n * @param {FeelType} [props.feel]\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.tooltipContainer\n * @param {Function} props.validate\n * @param {Function} props.show\n * @param {Function} props.example\n * @param {Array} props.variables\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {string} [props.placeholder]\n */\nexport function FeelTextAreaEntry(props) {\n  return <FeelEntry class=\"bio-properties-panel-feel-textarea\" OptionalComponent={ OptionalFeelTextArea } { ...props } />;\n}\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {Boolean} props.debounce\n * @param {Boolean} props.disabled\n * @param {FeelType} [props.feel]\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.tooltipContainer\n * @param {Function} props.validate\n * @param {Function} props.show\n * @param {Function} props.example\n * @param {Array} props.variables\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n */\nexport function FeelToggleSwitchEntry(props) {\n  return <FeelEntry class=\"bio-properties-panel-feel-toggle-switch\" OptionalComponent={ OptionalFeelToggleSwitch } { ...props } />;\n}\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {Boolean} props.debounce\n * @param {Boolean} props.disabled\n * @param {FeelType} [props.feel]\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.tooltipContainer\n * @param {Function} props.validate\n * @param {Function} props.show\n * @param {Function} props.example\n * @param {Array} props.variables\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n */\nexport function FeelCheckboxEntry(props) {\n  return <FeelEntry class=\"bio-properties-panel-feel-checkbox\" OptionalComponent={ OptionalFeelCheckbox } { ...props } />;\n}\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {String} props.hostLanguage\n * @param {Boolean} props.singleLine\n * @param {Boolean} props.debounce\n * @param {Boolean} props.disabled\n * @param {FeelType} [props.feel]\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.tooltipContainer\n * @param {Function} props.validate\n * @param {Function} props.show\n * @param {Function} props.example\n * @param {Array} props.variables\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n */\nexport function FeelTemplatingEntry(props) {\n  return <FeelEntry class=\"bio-properties-panel-feel-templating\" OptionalComponent={ TemplatingEditor } { ...props } />;\n}\n\nexport function isEdited(node) {\n  if (!node) {\n    return false;\n  }\n\n  if (node.type === 'checkbox') {\n    return !!node.checked || node.classList.contains('edited');\n  }\n\n  return !!node.value || node.classList.contains('edited');\n}\n\n\n// helpers /////////////////\n\nfunction prefixId(id) {\n  return `bio-properties-panel-${id}`;\n}\n","import { useCallback, useEffect, useState, useMemo, useRef } from 'preact/hooks';\nimport { useStaticCallback, useShowEntryEvent } from '../../../hooks';\nimport { isFunction } from 'min-dash';\nimport { useError } from '../../../hooks';\nimport classnames from 'classnames';\nimport Description from '../Description';\nimport TemplatingEditor from './TemplatingEditor';\n\nconst noop = () => {};\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {Boolean} props.debounce\n * @param {Boolean} props.disabled\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.tooltipContainer\n * @param {Function} props.validate\n * @param {Function} props.show\n */\nexport default function TemplatingEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    debounce,\n    disabled,\n    label,\n    getValue,\n    setValue,\n    tooltipContainer,\n    validate,\n    show = noop,\n  } = props;\n\n  const [ validationError, setValidationError ] = useState(null);\n  const [ localError, setLocalError ] = useState(null);\n\n  let value = getValue(element);\n\n  useEffect(() => {\n    if (isFunction(validate)) {\n      const newValidationError = validate(value) || null;\n\n      setValidationError(newValidationError);\n    }\n  }, [ value, validate ]);\n\n  const onInput = useStaticCallback((newValue) => {\n    let newValidationError = null;\n\n    if (isFunction(validate)) {\n      newValidationError = validate(newValue) || null;\n    }\n\n    // don't create multiple commandStack entries for the same value\n    if (newValue !== value) {\n      setValue(newValue, newValidationError);\n    }\n\n    setValidationError(newValidationError);\n  });\n\n  const onError = useCallback(err => {\n    setLocalError(err);\n  }, []);\n\n  const temporaryError = useError(id);\n\n  const error = localError || temporaryError || validationError;\n\n  return (\n    <div\n      class={ classnames(\n        'bio-properties-panel-entry',\n        error ? 'has-error' : '')\n      }\n      data-entry-id={ id }>\n      <Templating\n        debounce={ debounce }\n        disabled={ disabled }\n        id={ id }\n        key={ element }\n        label={ label }\n        onInput={ onInput }\n        onError={ onError }\n        show={ show }\n        value={ value }\n        tooltipContainer={ tooltipContainer } />\n      {error && <div class=\"bio-properties-panel-error\">{error}</div>}\n      <Description forId={ id } element={ element } value={ description } />\n    </div>\n  );\n}\n\nfunction Templating(props) {\n  const {\n    debounce,\n    id,\n    label,\n    onInput,\n    onError,\n    value = '',\n    disabled = false,\n    tooltipContainer\n  } = props;\n\n  const [ localValue, setLocalValue ] = useState(value);\n\n  const editorRef = useShowEntryEvent(id);\n  const containerRef = useRef();\n\n  const [ focus, _setFocus ] = useState(undefined);\n\n  const setFocus = (offset = 0) => {\n    const hasFocus = containerRef.current.contains(document.activeElement);\n\n    // Keep caret position if it is already focused, otherwise focus at the end\n    const position = hasFocus ? document.activeElement.selectionStart : Infinity;\n\n    _setFocus(position + offset);\n  };\n\n  const handleInputCallback = useMemo(() => {\n    return debounce((newValue) => onInput(newValue.length ? newValue : undefined));\n  }, [ onInput, debounce ]);\n\n  const handleInput = newValue => {\n    handleInputCallback(newValue);\n    setLocalValue(newValue);\n  };\n\n  const handleLint = useStaticCallback(lint => {\n\n    const errors = lint && lint.length && lint.filter(e => e.severity === 'error') || [];\n\n    if (!errors.length) {\n      onError(undefined);\n      return;\n    }\n\n    const error = lint[0];\n    const message = `${error.source}: ${error.message}`;\n\n    onError(message);\n  });\n\n  useEffect(() => {\n    if (typeof focus !== 'undefined') {\n      editorRef.current.focus(focus);\n      _setFocus(undefined);\n    }\n  }, [ focus ]);\n\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n    setLocalValue(value ? value : '');\n  }, [ value ]);\n\n  return (\n    <div class=\"bio-properties-panel-feelers\">\n      <label id={ prefixIdLabel(id) } class=\"bio-properties-panel-label\" onClick={ () => setFocus() }>\n        {label}\n      </label>\n      <div class=\"bio-properties-panel-feelers-input\" ref={ containerRef }>\n        <TemplatingEditor\n          name={ id }\n          onInput={ handleInput }\n          contentAttributes={ { 'aria-labelledby': prefixIdLabel(id) } }\n          disabled={ disabled }\n          onLint={ handleLint }\n          value={ localValue }\n          ref={ editorRef }\n          tooltipContainer={ tooltipContainer }\n        />\n      </div>\n    </div>\n  );\n}\n\nexport function isEdited(node) {\n  return node && (!!node.value || node.classList.contains('edited'));\n}\n\n// helpers /////////////////\n\nfunction prefixIdLabel(id) {\n  return `bio-properties-panel-feelers-${id}-label`;\n}","import {\n  useEffect,\n  useState,\n  useRef\n} from 'preact/hooks';\n\nimport {\n  query as domQuery\n} from 'min-dom';\n\nimport { isFunction } from 'min-dash';\n\nimport {\n  useKeyFactory,\n  usePrevious,\n  useStickyIntersectionObserver\n} from '../../hooks';\n\nimport classnames from 'classnames';\n\nimport {\n  ArrowIcon,\n  CreateIcon,\n  DeleteIcon\n} from '../icons';\n\n/**\n * Entry for handling lists represented as nested entries.\n *\n * @template Item\n * @param {object} props\n * @param {string} props.id\n * @param {*} props.element\n * @param {Function} props.onAdd\n * @param {import('preact').Component} props.component\n * @param {string} [props.label='<empty>']\n * @param {Function} [props.onRemove]\n * @param {Item[]} [props.items]\n * @param {boolean} [props.open]\n * @param {string|boolean} [props.autoFocusEntry] either a custom selector string or true to focus the first input\n * @returns\n */\nexport default function List(props) {\n  const {\n    id,\n    element,\n    items = [],\n    component,\n    label = '<empty>',\n    open: shouldOpen,\n    onAdd,\n    onRemove,\n    autoFocusEntry,\n    ...restProps\n  } = props;\n\n  const entryRef = useRef(null);\n  const [ open, setOpen ] = useState(!!shouldOpen);\n  const [ sticky, setSticky ] = useState(false);\n\n  const hasItems = !!items.length;\n  const toggleOpen = () => hasItems && setOpen(!open);\n\n  const elementChanged = usePrevious(element) !== element;\n  const newItems = useNewItems(items, elementChanged);\n\n  useEffect(() => {\n    if (open && !hasItems) {\n      setOpen(false);\n    }\n  }, [ open, hasItems ]);\n\n  /**\n   * @param {MouseEvent} event\n   */\n  function addItem(event) {\n    event.stopPropagation();\n    onAdd();\n\n    if (!open) {\n      setOpen(true);\n    }\n  }\n\n  // set css class when entry is sticky to top\n  useStickyIntersectionObserver(entryRef, 'div.bio-properties-panel-scroll-container', setSticky);\n\n  return (\n    <div\n      data-entry-id={ id }\n      class={ classnames(\n        'bio-properties-panel-entry',\n        'bio-properties-panel-list-entry',\n        hasItems ? '' : 'empty',\n        open ? 'open' : ''\n      ) }\n      ref={ entryRef }>\n      <div\n        class={ classnames(\n          'bio-properties-panel-list-entry-header',\n          (sticky && open) ? 'sticky' : ''\n        ) }\n        onClick={ toggleOpen }>\n        <div\n          title={ label }\n          class={ classnames(\n            'bio-properties-panel-list-entry-header-title',\n            open && 'open'\n          ) }>\n          { label }\n        </div>\n        <div\n          class=\"bio-properties-panel-list-entry-header-buttons\"\n        >\n          <button\n            type=\"button\"\n            title=\"Create new list item\"\n            onClick={ addItem }\n            class=\"bio-properties-panel-add-entry\"\n          >\n            <CreateIcon />\n            {\n              !hasItems ? (\n                <span class=\"bio-properties-panel-add-entry-label\">Create</span>\n              )\n                : null\n            }\n          </button>\n          {\n            hasItems && (\n              <div\n                title={ `List contains ${items.length} item${items.length != 1 ? 's' : ''}` }\n                class=\"bio-properties-panel-list-badge\"\n              >\n                { items.length }\n              </div>\n            )\n          }\n          {\n            hasItems && (\n              <button\n                type=\"button\"\n                title=\"Toggle list item\"\n                class=\"bio-properties-panel-arrow\"\n              >\n                <ArrowIcon class={ open ? 'bio-properties-panel-arrow-down' : 'bio-properties-panel-arrow-right' } />\n              </button>\n            )\n          }\n        </div>\n      </div>\n      {\n        hasItems && (\n          <ItemsList\n            { ...restProps }\n            autoFocusEntry={ autoFocusEntry }\n            component={ component }\n            element={ element }\n            id={ id }\n            items={ items }\n            newItems={ newItems }\n            onRemove={ onRemove }\n            open={ open }\n          />\n        )\n      }\n    </div>\n  );\n}\n\nfunction ItemsList(props) {\n  const {\n    autoFocusEntry,\n    component: Component,\n    element,\n    id,\n    items,\n    newItems,\n    onRemove,\n    open,\n    ...restProps\n  } = props;\n\n  const getKey = useKeyFactory();\n\n  const newItem = newItems[0];\n\n  useEffect(() => {\n    if (newItem && autoFocusEntry) {\n\n      // (0) select the parent entry (containing all list items)\n      const entry = domQuery(`[data-entry-id=\"${id}\"]`);\n\n      // (1) select the first input or a custom element to be focussed\n      const selector = typeof(autoFocusEntry) === 'boolean' ?\n        '.bio-properties-panel-input' :\n        autoFocusEntry;\n      const focusableInput = domQuery(selector, entry);\n\n      // (2) set focus\n      if (focusableInput) {\n\n        if (isFunction(focusableInput.select)) {\n          focusableInput.select();\n        } else if (isFunction(focusableInput.focus)) {\n          focusableInput.focus();\n        }\n\n      }\n    }\n  }, [ newItem, autoFocusEntry, id ]);\n\n  return <ol class={ classnames(\n    'bio-properties-panel-list-entry-items',\n    open ? 'open' : ''\n  ) }>\n    {\n      items.map((item, index) => {\n        const key = getKey(item);\n\n        return (<li class=\"bio-properties-panel-list-entry-item\" key={ key }>\n          <Component\n            { ...restProps }\n            element={ element }\n            id={ id }\n            index={ index }\n            item={ item }\n            open={ item === newItem } />\n          {\n            onRemove && (\n              <button\n                type=\"button\"\n                title=\"Delete item\"\n                class=\"bio-properties-panel-remove-entry bio-properties-panel-remove-list-entry\"\n                onClick={ () => onRemove && onRemove(item) }\n              ><DeleteIcon /></button>\n            )\n          }\n        </li>);\n      })\n    }\n  </ol>;\n}\n\nfunction useNewItems(items = [], shouldReset) {\n  const previousItems = usePrevious(items.slice()) || [];\n\n  if (shouldReset) {\n    return [];\n  }\n\n  return previousItems ? items.filter(item => !previousItems.includes(item)) : [];\n}\n","import classNames from 'classnames';\n\nimport { isFunction } from 'min-dash';\n\nimport {\n  useError,\n  useShowEntryEvent\n} from '../../hooks';\n\nimport {\n  useEffect,\n  useState\n} from 'preact/hooks';\n\nimport Description from './Description';\nimport Tooltip from './Tooltip';\n\n/**\n * @typedef { { value: string, label: string, disabled: boolean, children: { value: string, label: string, disabled: boolean } } } Option\n */\n\n/**\n * Provides basic select input.\n *\n * @param {object} props\n * @param {string} props.id\n * @param {string[]} props.path\n * @param {string} props.label\n * @param {Function} props.onChange\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {Array<Option>} [props.options]\n * @param {string} props.value\n * @param {boolean} [props.disabled]\n */\nfunction Select(props) {\n  const {\n    id,\n    label,\n    onChange,\n    options = [],\n    value = '',\n    disabled,\n    onFocus,\n    onBlur,\n    tooltip\n  } = props;\n\n  const ref = useShowEntryEvent(id);\n\n  const [ localValue, setLocalValue ] = useState(value);\n\n  const handleChangeCallback = ({ target }) => {\n    onChange(target.value);\n  };\n\n  const handleChange = e => {\n    handleChangeCallback(e);\n    setLocalValue(e.target.value);\n  };\n\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n\n    setLocalValue(value);\n  }, [ value ]);\n\n  return (\n    <div class=\"bio-properties-panel-select\">\n      <label for={ prefixId(id) } class=\"bio-properties-panel-label\">\n        <Tooltip value={ tooltip } forId={ id } element={ props.element }>\n          {label}\n        </Tooltip>\n      </label>\n      <select\n        ref={ ref }\n        id={ prefixId(id) }\n        name={ id }\n        class=\"bio-properties-panel-input\"\n        onInput={ handleChange }\n        onFocus={ onFocus }\n        onBlur={ onBlur }\n        value={ localValue }\n        disabled={ disabled }\n      >\n        {options.map((option, idx) => {\n          if (option.children) {\n            return (\n              <optgroup key={ idx } label={ option.label }>\n                {option.children.map((child, idx) => (\n                  <option\n                    key={ idx }\n                    value={ child.value }\n                    disabled={ child.disabled }\n                  >\n                    {child.label}\n                  </option>\n                ))}\n              </optgroup>\n            );\n          }\n\n          return (\n            <option key={ idx } value={ option.value } disabled={ option.disabled }>\n              {option.label}\n            </option>\n          );\n        })}\n      </select>\n    </div>\n  );\n}\n\n/**\n * @param {object} props\n * @param {object} props.element\n * @param {string} props.id\n * @param {string} [props.description]\n * @param {string} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {Function} props.getOptions\n * @param {boolean} [props.disabled]\n * @param {Function} [props.validate]\n * @param {string|import('preact').Component} props.tooltip\n */\nexport default function SelectEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    label,\n    getValue,\n    setValue,\n    getOptions,\n    disabled,\n    onFocus,\n    onBlur,\n    validate,\n    tooltip\n  } = props;\n\n  const options = getOptions(element);\n  const globalError = useError(id);\n  const [ localError, setLocalError ] = useState(null);\n\n  let value = getValue(element);\n\n  useEffect(() => {\n    if (isFunction(validate)) {\n      const newValidationError = validate(value) || null;\n\n      setLocalError(newValidationError);\n    }\n  }, [ value, validate ]);\n\n\n  const onChange = (newValue) => {\n    let newValidationError = null;\n\n    if (isFunction(validate)) {\n      newValidationError = validate(newValue) || null;\n    }\n\n    setValue(newValue, newValidationError);\n    setLocalError(newValidationError);\n  };\n\n  const error = globalError || localError;\n\n  return (\n    <div\n      class={ classNames(\n        'bio-properties-panel-entry',\n        error ? 'has-error' : '')\n      }\n      data-entry-id={ id }>\n      <Select\n        id={ id }\n        key={ element }\n        label={ label }\n        value={ value }\n        onChange={ onChange }\n        onFocus={ onFocus }\n        onBlur={ onBlur }\n        options={ options }\n        disabled={ disabled }\n        tooltip={ tooltip }\n        element={ element } />\n      { error && <div class=\"bio-properties-panel-error\">{ error }</div> }\n      <Description forId={ id } element={ element } value={ description } />\n    </div>\n  );\n}\n\nexport function isEdited(node) {\n  return node && !!node.value;\n}\n\n// helpers /////////////////\n\nfunction prefixId(id) {\n  return `bio-properties-panel-${ id }`;\n}","import {\n  useMemo,\n  useEffect,\n  useState\n} from 'preact/hooks';\n\n/**\n * @param {Object} props\n * @param {Function} props.debounce\n * @param {Boolean} [props.disabled]\n * @param {Object} props.element\n * @param {Function} props.getValue\n * @param {String} props.id\n * @param {Function} [props.onBlur]\n * @param {Function} [props.onFocus]\n * @param {Function} props.setValue\n */\nexport default function Simple(props) {\n  const {\n    debounce,\n    disabled,\n    element,\n    getValue,\n    id,\n    onBlur,\n    onFocus,\n    setValue\n  } = props;\n\n  const value = getValue(element);\n\n  const [ localValue, setLocalValue ] = useState(value);\n\n  const handleInputCallback = useMemo(() => {\n    return debounce((target) => setValue(target.value.length ? target.value : undefined));\n  }, [ setValue, debounce ]);\n\n  const handleInput = e => {\n    handleInputCallback(e.target);\n    setLocalValue(e.target.value);\n  };\n\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n\n    setLocalValue(value);\n  }, [ value ]);\n\n\n  return (\n    <div class=\"bio-properties-panel-simple\">\n      <input\n        id={ prefixId(id) }\n        key={ element }\n        type=\"text\"\n        name={ id }\n        spellCheck=\"false\"\n        autoComplete=\"off\"\n        disabled={ disabled }\n        class=\"bio-properties-panel-input\"\n        onInput={ handleInput }\n        aria-label={ localValue || '<empty>' }\n        onFocus={ onFocus }\n        onBlur={ onBlur }\n        value={ localValue } />\n    </div>\n  );\n}\n\nexport function isEdited(node) {\n  return node && !!node.value;\n}\n\n\n// helpers /////////////////\n\nfunction prefixId(id) {\n  return `bio-properties-panel-${ id }`;\n}\n","import Description from './Description';\n\nimport {\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useState\n} from 'preact/hooks';\n\nimport classnames from 'classnames';\n\nimport {\n  useDebounce,\n  useElementVisible,\n  useError,\n  useShowEntryEvent,\n  useStaticCallback\n} from '../../hooks';\n\nimport { isFunction } from 'min-dash';\nimport Tooltip from './Tooltip';\n\nfunction resizeToContents(element) {\n  element.style.height = 'auto';\n\n  // a 2px pixel offset is required to prevent scrollbar from\n  // appearing on OS with a full length scroll bar (Windows/Linux)\n  element.style.height = `${ element.scrollHeight + 2 }px`;\n}\n\nfunction TextArea(props) {\n\n  const {\n    id,\n    label,\n    debounce,\n    onInput: commitValue,\n    value = '',\n    disabled,\n    monospace,\n    onFocus,\n    onBlur,\n    autoResize = true,\n    placeholder,\n    rows = autoResize ? 1 : 2,\n    tooltip\n  } = props;\n\n  const [ localValue, setLocalValue ] = useState(value);\n\n  const ref = useShowEntryEvent(id);\n\n  const onInput = useCallback(newValue => {\n    const newModelValue = newValue === '' ? undefined : newValue;\n    commitValue(newModelValue);\n  }, [ commitValue ]);\n\n  const visible = useElementVisible(ref.current);\n\n  /**\n   * @type { import('min-dash').DebouncedFunction }\n   */\n  const handleInput = useDebounce(onInput, debounce);\n\n  const handleLocalInput = e => {\n    autoResize && resizeToContents(e.target);\n\n    if (e.target.value === localValue) {\n      return;\n    }\n\n    setLocalValue(e.target.value);\n    handleInput(e.target.value);\n  };\n\n  const handleOnBlur = e => {\n    const trimmedValue = e.target.value.trim();\n\n    // trim and commit on blur\n    onInput(trimmedValue);\n\n    if (onBlur) {\n      onBlur(e);\n    }\n  };\n\n  useLayoutEffect(() => {\n    autoResize && resizeToContents(ref.current);\n  }, []);\n\n  useLayoutEffect(() => {\n    visible && autoResize && resizeToContents(ref.current);\n  }, [ visible ]);\n\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n\n    setLocalValue(value);\n  }, [ value ]);\n\n  return (\n    <div class=\"bio-properties-panel-textarea\">\n      <label for={ prefixId(id) } class=\"bio-properties-panel-label\">\n        <Tooltip value={ tooltip } forId={ id } element={ props.element }>\n          { label }\n        </Tooltip>\n      </label>\n      <textarea\n        ref={ ref }\n        id={ prefixId(id) }\n        name={ id }\n        spellCheck=\"false\"\n        class={ classnames(\n          'bio-properties-panel-input',\n          monospace ? 'bio-properties-panel-input-monospace' : '',\n          autoResize ? 'auto-resize' : '')\n        }\n        onInput={ handleLocalInput }\n        onFocus={ onFocus }\n        onBlur={ handleOnBlur }\n        placeholder={ placeholder }\n        rows={ rows }\n        value={ localValue }\n        disabled={ disabled }\n        data-gramm=\"false\"\n      />\n    </div>\n  );\n}\n\n/**\n * @param {object} props\n * @param {object} props.element\n * @param {string} props.id\n * @param {string} props.description\n * @param {boolean} props.debounce\n * @param {string} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {number} props.rows\n * @param {boolean} props.monospace\n * @param {Function} [props.validate]\n * @param {boolean} [props.disabled]\n */\nexport default function TextAreaEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    debounce,\n    label,\n    getValue,\n    setValue,\n    rows,\n    monospace,\n    disabled,\n    validate,\n    onFocus,\n    onBlur,\n    placeholder,\n    autoResize,\n    tooltip\n  } = props;\n\n  const globalError = useError(id);\n  const [ localError, setLocalError ] = useState(null);\n\n  let value = getValue(element);\n\n  useEffect(() => {\n    if (isFunction(validate)) {\n      const newValidationError = validate(value) || null;\n\n      setLocalError(newValidationError);\n    }\n  }, [ value, validate ]);\n\n  const onInput = useStaticCallback((newValue) => {\n    const value = getValue(element);\n    let newValidationError = null;\n\n    if (isFunction(validate)) {\n      newValidationError = validate(newValue) || null;\n    }\n\n    if (newValue !== value) {\n      setValue(newValue, newValidationError);\n    }\n\n    setLocalError(newValidationError);\n  });\n\n\n  const error = globalError || localError;\n\n  return (\n    <div\n      class={ classnames(\n        'bio-properties-panel-entry',\n        error ? 'has-error' : '')\n      }\n      data-entry-id={ id }>\n      <TextArea\n        id={ id }\n        key={ element }\n        label={ label }\n        value={ value }\n        onInput={ onInput }\n        onFocus={ onFocus }\n        onBlur={ onBlur }\n        rows={ rows }\n        debounce={ debounce }\n        monospace={ monospace }\n        disabled={ disabled }\n        placeholder={ placeholder }\n        autoResize={ autoResize }\n        tooltip={ tooltip }\n        element={ element } />\n      { error && <div class=\"bio-properties-panel-error\">{ error }</div> }\n      <Description forId={ id } element={ element } value={ description } />\n    </div>\n  );\n}\n\nexport function isEdited(node) {\n  return node && !!node.value;\n}\n\n\n// helpers /////////////////\n\nfunction prefixId(id) {\n  return `bio-properties-panel-${ id }`;\n}\n","import Description from './Description';\nimport Tooltip from './Tooltip';\n\nimport {\n  useCallback,\n  useEffect,\n  useState\n} from 'preact/hooks';\n\nimport classnames from 'classnames';\n\nimport { isFunction } from 'min-dash';\n\nimport {\n  useDebounce,\n  useError,\n  useShowEntryEvent,\n  useStaticCallback\n} from '../../hooks';\n\nfunction Textfield(props) {\n\n  const {\n    debounce,\n    disabled = false,\n    id,\n    label,\n    onInput: commitValue,\n    onFocus,\n    onBlur,\n    placeholder,\n    value = '',\n    tooltip\n  } = props;\n\n  const [ localValue, setLocalValue ] = useState(value || '');\n\n  const ref = useShowEntryEvent(id);\n\n  const onInput = useCallback(newValue => {\n    const newModelValue = newValue === '' ? undefined : newValue;\n    commitValue(newModelValue);\n  }, [ commitValue ]);\n\n  /**\n   * @type { import('min-dash').DebouncedFunction }\n   */\n  const handleInput = useDebounce(onInput, debounce);\n\n  const handleOnBlur = e => {\n    const trimmedValue = e.target.value.trim();\n\n    // trim and commit on blur\n    onInput(trimmedValue);\n\n    if (onBlur) {\n      onBlur(e);\n    }\n  };\n\n  const handleLocalInput = e => {\n\n    if (e.target.value === localValue) {\n      return;\n    }\n\n    setLocalValue(e.target.value);\n    handleInput(e.target.value);\n  };\n\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n\n    setLocalValue(value);\n  }, [ value ]);\n\n  return (\n    <div class=\"bio-properties-panel-textfield\">\n      <label for={ prefixId(id) } class=\"bio-properties-panel-label\">\n        <Tooltip value={ tooltip } forId={ id } element={ props.element }>\n          { label }\n        </Tooltip>\n      </label>\n      <input\n        ref={ ref }\n        id={ prefixId(id) }\n        type=\"text\"\n        name={ id }\n        spellCheck=\"false\"\n        autoComplete=\"off\"\n        disabled={ disabled }\n        class=\"bio-properties-panel-input\"\n        onInput={ handleLocalInput }\n        onFocus={ onFocus }\n        onBlur={ handleOnBlur }\n        placeholder={ placeholder }\n        value={ localValue } />\n    </div>\n  );\n}\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {Boolean} props.debounce\n * @param {Boolean} props.disabled\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {string|import('preact').Component} props.tooltip\n * @param {Function} props.validate\n */\nexport default function TextfieldEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    debounce,\n    disabled,\n    label,\n    getValue,\n    setValue,\n    validate,\n    onFocus,\n    onBlur,\n    placeholder,\n    tooltip\n  } = props;\n\n  const globalError = useError(id);\n  const [ localError, setLocalError ] = useState(null);\n\n  let value = getValue(element);\n\n  useEffect(() => {\n    if (isFunction(validate)) {\n      const newValidationError = validate(value) || null;\n\n      setLocalError(newValidationError);\n    }\n  }, [ value, validate ]);\n\n  const onInput = useStaticCallback((newValue) => {\n    const value = getValue(element);\n    let newValidationError = null;\n\n    if (isFunction(validate)) {\n      newValidationError = validate(newValue) || null;\n    }\n\n    if (newValue !== value) {\n      setValue(newValue, newValidationError);\n    }\n\n    setLocalError(newValidationError);\n  });\n\n\n  const error = globalError || localError;\n\n  return (\n    <div\n      class={ classnames(\n        'bio-properties-panel-entry',\n        error ? 'has-error' : '')\n      }\n      data-entry-id={ id }>\n      <Textfield\n        debounce={ debounce }\n        disabled={ disabled }\n        id={ id }\n        key={ element }\n        label={ label }\n        onInput={ onInput }\n        onFocus={ onFocus }\n        onBlur={ onBlur }\n        placeholder={ placeholder }\n        value={ value }\n        tooltip={ tooltip }\n        element={ element } />\n      { error && <div class=\"bio-properties-panel-error\">{ error }</div> }\n      <Description forId={ id } element={ element } value={ description } />\n    </div>\n  );\n}\n\nexport function isEdited(node) {\n  return node && !!node.value;\n}\n\n\n// helpers /////////////////\n\nfunction prefixId(id) {\n  return `bio-properties-panel-${ id }`;\n}","import {\n  debounce as _debounce,\n  isNumber\n} from 'min-dash';\n\nconst DEFAULT_DEBOUNCE_TIME = 600;\n\n/**\n * Creates a debounced version of a function, delaying its execution based on `debounceDelay`.\n *\n * - If `debounceDelay` is `false`, the function executes immediately without debouncing.\n * - If a number is provided, the function execution is delayed by the given time in milliseconds.\n *\n * @param { Boolean | Number } [debounceDelay=300]\n *\n * @example\n * const debounce = debounceInput();\n * const debouncedFn = debounce(fn);\n *\n * debouncedFn(); // Executes after 300ms (default) if no further calls occur.\n */\nexport default function debounceInput(debounceDelay) {\n\n  /**\n   * Applies debounce to the provided function, with a previously setup delay.\n   *\n   * @template { (...args: any[]) => any } T\n   *\n   * @param {T} fn\n   *\n   * @return { (...p: Parameters<T>) => any }\n   */\n  return function debounce(fn) {\n    if (debounceDelay === false) {\n      return fn;\n    }\n\n    var debounceTime =\n      isNumber(debounceDelay) ?\n        debounceDelay :\n        DEFAULT_DEBOUNCE_TIME;\n\n    return _debounce(fn, debounceTime);\n  };\n}\n\ndebounceInput.$inject = [ 'config.debounceInput' ];\n","import debounceInput from './debounceInput';\n\nexport default {\n  debounceInput: [ 'factory', debounceInput ]\n};\n","import { domify } from 'min-dom';\n\n/**\n * Add a dragger that calls back the passed function with\n * { event, delta } on drag.\n *\n * @example\n *\n * function dragMove(event, delta) {\n *   // we are dragging (!!)\n * }\n *\n * domElement.addEventListener('dragstart', dragger(dragMove));\n *\n * @param {Function} fn\n * @param {Element} [dragPreview]\n *\n * @return {Function} drag start callback function\n */\nexport function createDragger(fn, dragPreview) {\n\n  let self;\n\n  let startX, startY;\n\n  /** drag start */\n  function onDragStart(event) {\n\n    self = this;\n\n    startX = event.clientX;\n    startY = event.clientY;\n\n    // (1) prevent preview image\n    if (event.dataTransfer) {\n      event.dataTransfer.setDragImage(dragPreview || emptyCanvas(), 0, 0);\n    }\n\n    // (2) setup drag listeners\n\n    // attach drag + cleanup event\n    // we need to do this to make sure we track cursor\n    // movements before we reach other drag event handlers,\n    // e.g. in child containers.\n    document.addEventListener('dragover', onDrag, true);\n    document.addEventListener('dragenter', preventDefault, true);\n\n    document.addEventListener('dragend', onEnd);\n    document.addEventListener('drop', preventDefault);\n  }\n\n  function onDrag(event) {\n    const delta = {\n      x: event.clientX - startX,\n      y: event.clientY - startY\n    };\n\n    // call provided fn with event, delta\n    return fn.call(self, event, delta);\n  }\n\n  function onEnd() {\n    document.removeEventListener('dragover', onDrag, true);\n    document.removeEventListener('dragenter', preventDefault, true);\n\n    document.removeEventListener('dragend', onEnd);\n    document.removeEventListener('drop', preventDefault);\n  }\n\n  return onDragStart;\n}\n\nfunction preventDefault(event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\n\nfunction emptyCanvas() {\n  return domify('<canvas width=\"0\" height=\"0\" />');\n}","import { forwardRef } from 'preact/compat';\n\nimport { useEffect, useRef } from 'preact/hooks';\n\nimport classNames from 'classnames';\n\nimport * as focusTrap from 'focus-trap';\n\nimport { DragIcon, CloseIcon } from '../../../components/icons';\n\nimport { createDragger } from '../../../components/util/dragger';\n\nconst noop = () => {};\n\n/**\n * A generic popup component.\n *\n * @param {Object} props\n * @param {string} [props.className]\n * @param {boolean} [props.delayInitialFocus]\n * @param {{top: number, left: number}} [props.position]\n * @param {number} [props.width]\n * @param {number} [props.height]\n * @param {Function} props.onClose\n * @param {Function} [props.onPostActivate]\n * @param {Function} [props.onPostDeactivate]\n * @param {boolean} [props.returnFocus]\n * @param {boolean} [props.closeOnEscape]\n * @param {string} props.title\n * @param {Ref} [ref]\n */\nfunction PopupComponent(props, globalRef) {\n  const {\n    className,\n    delayInitialFocus,\n    position,\n    width,\n    height,\n    onClose,\n    onPostActivate = noop,\n    onPostDeactivate = noop,\n    returnFocus = true,\n    closeOnEscape = true,\n    title\n  } = props;\n\n  const focusTrapRef = useRef(null);\n  const localRef = useRef(null);\n  const popupRef = globalRef || localRef;\n\n  const handleKeydown = (event) => {\n\n    // do not allow keyboard events to bubble\n    event.stopPropagation();\n\n    if (closeOnEscape && event.key === 'Escape') {\n      onClose();\n    }\n  };\n\n  // re-activate focus trap on focus\n  const handleFocus = () => {\n    if (focusTrapRef.current) {\n      focusTrapRef.current.activate();\n    }\n  };\n\n  let style = {};\n\n  if (position) {\n    style = {\n      ...style,\n      top: position.top + 'px',\n      left: position.left + 'px',\n    };\n  }\n\n  if (width) {\n    style.width = width + 'px';\n  }\n\n  if (height) {\n    style.height = height + 'px';\n  }\n\n  useEffect(() => {\n    if (popupRef.current) {\n      popupRef.current.addEventListener('focusin', handleFocus);\n    }\n\n    return () => {\n      if (popupRef.current) {\n        popupRef.current.removeEventListener('focusin', handleFocus);\n      }\n    };\n  }, [ popupRef ]);\n\n  useEffect(() => {\n    if (popupRef.current) {\n      focusTrapRef.current = focusTrap.createFocusTrap(popupRef.current, {\n        clickOutsideDeactivates: true,\n        delayInitialFocus,\n        fallbackFocus: popupRef.current,\n        onPostActivate,\n        onPostDeactivate,\n        returnFocusOnDeactivate: returnFocus,\n      });\n\n      focusTrapRef.current.activate();\n    }\n\n    return () => focusTrapRef.current && focusTrapRef.current.deactivate();\n  }, [ popupRef ]);\n\n  return (\n    <div\n      aria-label={ title }\n      tabIndex={ -1 }\n      ref={ popupRef }\n      onKeyDown={ handleKeydown }\n      role=\"dialog\"\n      class={ classNames('bio-properties-panel-popup', className) }\n      style={ style }\n    >\n      {props.children}\n    </div>\n  );\n}\n\nexport const Popup = forwardRef(PopupComponent);\n\nPopup.Title = Title;\nPopup.Body = Body;\nPopup.Footer = Footer;\n\nfunction Title(props) {\n  const {\n    children,\n    className,\n    draggable,\n    eventBus,\n    title,\n    showCloseButton = false,\n    closeButtonTooltip = 'Close popup',\n    onClose,\n    ...rest\n  } = props;\n\n  // we can't use state as we need to\n  // manipulate this inside dragging events\n  const context = useRef({\n    startPosition: null,\n    newPosition: null,\n  });\n\n  const dragPreviewRef = useRef();\n\n  const titleRef = useRef();\n\n  const onMove = (event, delta) => {\n    cancel(event);\n\n    const { x: dx, y: dy } = delta;\n\n    const newPosition = {\n      x: context.current.startPosition.x + dx,\n      y: context.current.startPosition.y + dy,\n    };\n\n    const popupParent = getPopupParent(titleRef.current);\n\n    popupParent.style.top = newPosition.y + 'px';\n    popupParent.style.left = newPosition.x + 'px';\n\n    eventBus?.fire('feelPopup.dragover', { newPosition, delta });\n  };\n\n  const onMoveStart = (event) => {\n\n    // initialize drag handler\n    const onDragStart = createDragger(onMove, dragPreviewRef.current);\n    onDragStart(event);\n\n    event.stopPropagation();\n\n    const popupParent = getPopupParent(titleRef.current);\n\n    const bounds = popupParent.getBoundingClientRect();\n    context.current.startPosition = {\n      x: bounds.left,\n      y: bounds.top,\n    };\n\n    eventBus?.fire('feelPopup.dragstart');\n  };\n\n  const onMoveEnd = () => {\n    context.current.newPosition = null;\n\n    eventBus?.fire('feelPopup.dragend');\n  };\n\n  return (\n    <div\n      class={ classNames(\n        'bio-properties-panel-popup__header',\n        draggable && 'draggable',\n        className\n      ) }\n      ref={ titleRef }\n      draggable={ draggable }\n      onDragStart={ onMoveStart }\n      onDragEnd={ onMoveEnd }\n      { ...rest }\n    >\n      {draggable && (\n        <>\n          <div\n            ref={ dragPreviewRef }\n            class=\"bio-properties-panel-popup__drag-preview\"\n          ></div>\n          <div class=\"bio-properties-panel-popup__drag-handle\">\n            <DragIcon />\n          </div>\n        </>\n      )}\n      <div class=\"bio-properties-panel-popup__title\">{title}</div>\n      {children}\n      {showCloseButton && (\n        <button\n          title={ closeButtonTooltip }\n          class=\"bio-properties-panel-popup__close\"\n          onClick={ onClose }\n        >\n          <CloseIcon />\n        </button>\n      )}\n    </div>\n  );\n}\n\nfunction Body(props) {\n  const { children, className, ...rest } = props;\n\n  return (\n    <div\n      class={ classNames('bio-properties-panel-popup__body', className) }\n      { ...rest }\n    >\n      {children}\n    </div>\n  );\n}\n\nfunction Footer(props) {\n  const { children, className, ...rest } = props;\n\n  return (\n    <div\n      class={ classNames('bio-properties-panel-popup__footer', className) }\n      { ...rest }\n    >\n      {props.children}\n    </div>\n  );\n}\n\n// helpers //////////////////////\n\nfunction getPopupParent(node) {\n  return node.closest('.bio-properties-panel-popup');\n}\n\nfunction cancel(event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\n","import { useEffect, useRef } from 'preact/hooks';\nimport FeelEditor from '../../../components/entries/FEEL/FeelEditor';\nimport TemplatingEditor from '../../../components/entries/templating/TemplatingEditor';\nimport { LaunchIcon } from '../../../components/icons';\nimport { Popup } from './Popup';\n\n/**\n * @typedef {Object} FeelPopupProps\n * @property {string} entryId\n * @property {Function} onInput\n * @property {Function} onClose\n * @property {string} title\n * @property {'feel'|'feelers'} type\n * @property {string} value\n * @property {Array} [links]\n * @property {Array|Object} [variables]\n * @property {Object} [position]\n * @property {string} [hostLanguage]\n * @property {boolean} [singleLine]\n * @property {HTMLElement} [sourceElement]\n * @property {HTMLElement|string} [tooltipContainer]\n * @property {Object} [eventBus]\n */\n\nexport const FEEL_POPUP_WIDTH = 700;\nexport const FEEL_POPUP_HEIGHT = 250;\n\n/**\n * FEEL expression editor popup component\n * @param {FeelPopupProps} props\n */\nexport function FeelPopup(props) {\n  const {\n    entryId,\n    onInput,\n    onClose,\n    title,\n    type,\n    value,\n    links,\n    variables,\n    position,\n    hostLanguage,\n    singleLine,\n    sourceElement,\n    tooltipContainer,\n    eventBus,\n    feelLanguageContext,\n  } = props;\n\n  const editorRef = useRef();\n  const popupRef = useRef();\n\n  const isAutoCompletionOpen = useRef(false);\n\n  const handleSetReturnFocus = () => {\n    sourceElement && sourceElement.focus();\n  };\n\n  const onKeyDownCapture = (event) => {\n\n    // we use capture here to make sure we handle the event before the editor does\n    if (event.key === 'Escape') {\n      isAutoCompletionOpen.current = autoCompletionOpen(event.target);\n    }\n  };\n\n  const onKeyDown = (event) => {\n    if (event.key === 'Escape') {\n\n      // close popup only if auto completion is not open\n      if (!isAutoCompletionOpen.current) {\n        onClose();\n        isAutoCompletionOpen.current = false;\n      }\n    }\n  };\n\n  useEffect(() => {\n\n    // set focus on editor when popup is opened\n    if (editorRef.current) {\n      editorRef.current.focus();\n    }\n  }, [ editorRef ]);\n\n  return (\n    <Popup\n      className=\"bio-properties-panel-feel-popup\"\n      position={ position }\n      title={ title }\n      returnFocus={ false }\n      closeOnEscape={ false }\n      delayInitialFocus={ false }\n      onPostDeactivate={ handleSetReturnFocus }\n      height={ FEEL_POPUP_HEIGHT }\n      width={ FEEL_POPUP_WIDTH }\n      ref={ popupRef }\n    >\n      <Popup.Title\n        title={ title }\n        eventBus={ eventBus }\n        showCloseButton={ true }\n        closeButtonTooltip=\"Save and close\"\n        onClose={ onClose }\n        draggable\n      >\n        <>\n          {(links || []).map((link, index) => {\n            return (\n              <a\n                key={ index }\n                rel=\"noreferrer\"\n                href={ link.href }\n                target=\"_blank\"\n                class=\"bio-properties-panel-feel-popup__title-link\"\n              >\n                {link.title}\n                <LaunchIcon />\n              </a>\n            );\n          })}\n        </>\n      </Popup.Title>\n      <Popup.Body>\n        <div\n          onKeyDownCapture={ onKeyDownCapture }\n          onKeyDown={ onKeyDown }\n          class=\"bio-properties-panel-feel-popup__body\"\n        >\n          {type === 'feel' && (\n            <FeelEditor\n              enableGutters={ true }\n              id={ prefixId(entryId) }\n              name={ entryId }\n              onInput={ onInput }\n              value={ value }\n              variables={ variables }\n              feelLanguageContext={ feelLanguageContext }\n              ref={ editorRef }\n              tooltipContainer={ tooltipContainer }\n            />\n          )}\n\n          {type === 'feelers' && (\n            <TemplatingEditor\n              id={ prefixId(entryId) }\n              contentAttributes={ { 'aria-label': title } }\n              enableGutters={ true }\n              hostLanguage={ hostLanguage }\n              name={ entryId }\n              onInput={ onInput }\n              value={ value }\n              ref={ editorRef }\n              singleLine={ singleLine }\n              tooltipContainer={ tooltipContainer }\n            />\n          )}\n        </div>\n      </Popup.Body>\n    </Popup>\n  );\n}\n\nfunction prefixId(id) {\n  return `bio-properties-panel-${id}`;\n}\n\nfunction autoCompletionOpen(element) {\n  const editor = element.closest('.cm-editor');\n  return editor ? editor.querySelector('.cm-tooltip-autocomplete') : null;\n}\n","import { FEEL_POPUP_WIDTH, FEEL_POPUP_HEIGHT } from './FeelPopup';\n\nexport function getPopupTitle({ element, label }) {\n  let popupTitle = '';\n\n  if (element && element.type) {\n    popupTitle = `${element.type} / `;\n  }\n\n  return `${popupTitle}${label}`;\n}\n\nexport function getPopupPosition() {\n  const viewportWidth = window.innerWidth || document.documentElement.clientWidth;\n  const viewportHeight = window.innerHeight || document.documentElement.clientHeight;\n\n  return {\n    left: Math.max(0, (viewportWidth - FEEL_POPUP_WIDTH) / 2),\n    top: Math.max(0, (viewportHeight - FEEL_POPUP_HEIGHT) / 2)\n  };\n}","import { getPopupPosition, getPopupTitle } from './components/helpers';\n\n/**\n * FEEL popup component, built as a singleton.\n *\n * In order to implement a custom replacement, handle the following events:\n * - `propertiesPanel.openPopup`\n * - `propertiesPanel.closePopup`\n * - `propertiesPanel.detach`\n *\n * Within the custom renderer, make sure to emit the following events:\n *  - `feelPopup.open` - fired before the popup is mounted\n *  - `feelPopup.opened` - fired after the popup is mounted. Event context contains the DOM node of the popup as `domNode`\n *  - `feelPopup.close` - fired before the popup is unmounted. Event context contains the DOM node of the popup as `domNode`\n *  - `feelPopup.closed` - fired after the popup is unmounted\n */\nexport class FeelPopup {\n  constructor(eventBus, config = {}) {\n    this._eventBus = eventBus;\n    this._config = config;\n\n    this._isOpen = false;\n\n    eventBus.on('propertiesPanel.openPopup', (_, context) => {\n      this.open(context.entryId, context, context.sourceElement);\n\n      // return true to indicate that popup was opened\n      return true;\n    });\n\n    eventBus.on([\n      'propertiesPanel.closePopup',\n      'propertiesPanel.detach'\n    ], () => {\n      this.close();\n    });\n  }\n\n  /**\n   * Check if the FEEL popup is open.\n   * @return {Boolean}\n   */\n  isOpen() {\n    return this._isOpen;\n  }\n\n  /**\n   * Open the FEEL popup.\n   *\n   * @param {String} entryId\n   * @param {Object} popupConfig\n   * @param {HTMLElement} sourceElement\n   */\n  open(entryId, popupConfig, sourceElement) {\n\n    // close before opening a new one\n    this.close();\n\n    this._openPopup({\n      ...popupConfig,\n      entryId,\n      sourceElement\n    });\n  }\n\n  /**\n   * Close the FEEL popup.\n   */\n  close() {\n    this._closePopup();\n  }\n\n  _openPopup(context) {\n    const {\n      element,\n      label,\n      sourceElement,\n      type\n    } = context;\n\n    this._isOpen = true;\n\n    this._eventBus.fire('propertiesPanelPopup.open', {\n      container: this._config.feelPopupContainer,\n      config: {\n        ...context,\n        links: this._config.getFeelPopupLinks?.(type) || [],\n        onClose: () => {\n          this._closePopup();\n\n          // setTimeout to ensure the focus happens after the DOM updates make it focusable\n          setTimeout(() => {\n            sourceElement && sourceElement.focus();\n          }, 0);\n        },\n        position: getPopupPosition(),\n        title: getPopupTitle({ element, label })\n      }\n    });\n  }\n\n  _closePopup() {\n    if (this._isOpen) {\n      this._isOpen = false;\n\n      this._eventBus.fire('propertiesPanelPopup.close');\n    }\n  }\n}\n\nFeelPopup.$inject = [ 'eventBus', 'config.propertiesPanel' ];\n","import { render } from 'preact';\nimport { FeelPopup } from './components';\nimport { query as domQuery } from 'min-dom';\nimport { isString } from 'min-dash';\n\n\nexport class FeelPopupRenderer {\n  constructor(eventBus) {\n    this._eventBus = eventBus;\n\n    this._container = null;\n    this._element = null;\n\n    eventBus.on('propertiesPanelPopup.open', (context) => {\n      this._renderPopup(context);\n    });\n\n    eventBus.on('propertiesPanelPopup.close', () => {\n      this._removePopup();\n    });\n  }\n\n  _renderPopup(context) {\n    let { container, config } = context;\n\n    container = this._container = getContainer(container) || document.body;\n\n    const element = this._element = createElement();\n\n    container.appendChild(element);\n\n    // TODO(philippfromme): there is no useService in this context, so we need\n    // to pass the event bus as a prop or create a context provider, however,\n    // a custom renderer would have to use that context provider as well to have\n    // access to the event bus and other services\n    this._emit('feelPopup.open');\n\n    render(\n      <FeelPopup { ...config } eventBus={ this._eventBus } />,\n      element\n    );\n\n    this._emit('feelPopup.opened', {\n      domNode: element\n    });\n  }\n\n  _removePopup() {\n    if (!this._container) {\n      return;\n    }\n\n    this._emit('feelPopup.close', {\n      domNode: this._element\n    });\n\n    render(null, this._element);\n\n    this._container.removeChild(this._element);\n\n    this._container = null;\n\n    this._emit('feelPopup.closed');\n  }\n\n  _emit(event, context) {\n    this._eventBus.fire(event, context);\n  }\n}\n\nFeelPopupRenderer.$inject = [ 'eventBus' ];\n\n// helpers /////////////////\n\nfunction createElement() {\n  const element = document.createElement('div');\n\n  element.classList.add('bio-properties-panel-popup-container');\n\n  return element;\n}\n\nfunction getContainer(container) {\n  if (isString(container)) {\n    return domQuery(container);\n  }\n\n  return container;\n}","import { FeelPopup } from './FeelPopup';\nimport { FeelPopupRenderer } from './FeelPopupRenderer';\n\nexport default {\n  __init__: [ 'feelPopup', 'feelPopupRenderer' ],\n  feelPopup: [ 'type', FeelPopup ],\n  feelPopupRenderer: [ 'type', FeelPopupRenderer ],\n};"],"names":["Header","props","element","headerProvider","getElementIcon","getDocumentationRef","getElementLabel","getTypeLabel","label","type","documentationRef","ElementIcon","_jsxs","class","children","_jsx","width","height","viewBox","title","rel","href","target","ExternalLinkIcon","DescriptionContext","createContext","description","getDescriptionForId","ErrorsContext","errors","EventContext","eventBus","FeelLanguageContext","LayoutContext","layout","setLayout","getLayoutForKey","setLayoutForKey","TooltipContext","tooltip","getTooltipForId","useTooltipContext","id","useContext","TooltipWrapper","forId","contextDescription","value","Tooltip","parent","direction","position","visible","setVisible","useState","SHOW_DELAY","timeout","wrapperRef","useRef","tooltipRef","show","_","delay","setTimeout","hide","clearTimeout","handleMouseLeave","relatedTarget","current","parentElement","handleFocusOut","e","isHovered","matches","stopPropagation","hideTooltipViaEscape","code","renderTooltip","role","style","getTooltipPosition","ref","onClick","onMouseLeave","tabIndex","onMouseEnter","onFocus","onBlur","onKeyDown","createPortal","refElement","refPosition","getBoundingClientRect","right","x","top","useDescriptionContext","useDebounce","callback","debounceFn","debouncedCallback","useCallback","useEffect","cancel","useError","useErrors","useEvent","event","eventContext","didMount","on","off","KEY_LENGTH","useKeyFactory","dependencies","map","useMemo","Map","getKey","el","key","get","Math","random","toString","slice","set","useLayoutState","path","defaultValue","layoutForKey","setState","newValue","usePrevious","useShowEntryEvent","onShow","PropertiesPanelContext","focus","onShowEntry","isFunction","select","useStickyIntersectionObserver","scrollContainerSelector","setSticky","scrollContainer","setScrollContainer","domQuery","updateScrollContainer","newScrollContainer","Observer","IntersectionObserver","observer","entries","scrollHeight","forEach","entry","intersectionRatio","root","rootMargin","threshold","observe","unobserve","useStaticCallback","callbackRef","args","useElementVisible","clientHeight","useLayoutEffect","resizeObserver","ResizeObserver","requestAnimationFrame","newVisible","contentRect","disconnect","Group","shouldOpen","groupRef","open","setOpen","toggleOpen","edited","setEdited","sticky","scheduled","hasOneEditedEntry","find","isEdited","entryNode","inputNode","cancelAnimationFrame","allErrors","hasErrors","some","propertiesPanelContext","classnames","DataMarker","ArrowIcon","Provider","component","Component","_createElement","Placeholder","text","icon","Icon","DEFAULT_LAYOUT","DEFAULT_DESCRIPTION","DEFAULT_TOOLTIP","PropertiesPanel","placeholderProvider","groups","layoutConfig","layoutChanged","descriptionConfig","descriptionLoaded","tooltipConfig","tooltipLoaded","createLayout","useUpdateLayoutEffect","newLayout","config","assign","layoutContext","createDescriptionContext","descriptionContext","createTooltipContext","tooltipContext","setErrors","onSetErrors","errorsContext","getEmpty","isArray","getMultiple","group","overrides","defaults","effect","deps","isMounted","DropdownButton","className","menuItems","dropdownRef","menuRef","close","onDropdownToggle","contains","onActionClick","action","useGlobalClick","item","index","MenuItem","separator","ignoredElements","listener","document","addEventListener","capture","removeEventListener","HeaderButton","classname","otherProps","translateFallback","template","replacements","replace","CollapsibleEntry","remove","translate","placeholderLabel","DeleteIcon","ListItem","autoFocusEntry","autoOpen","focusableInput","scrollIntoView","noop","ListGroup","add","items","shouldSort","undefined","console","warn","localItems","setLocalItems","addTriggered","setAddTriggered","prevElement","openItemIds","getNewItemIds","hasItems","length","handleAddClick","hasError","CreateIcon","numOfItems","includes","newItems","oldItems","newIds","oldIds","filter","itemId","Description","Checkbox","onChange","disabled","localValue","setLocalValue","handleChangeCallback","checked","handleChange","prefixId","name","for","CheckboxEntry","getValue","setValue","error","node","OpenPopupButton","OpenPopupIcon","useBufferedFocus","editor","buffer","setBuffer","offset","Infinity","TemplatingEditor","forwardRef","onInput","tooltipContainer","enableGutters","onLint","onOpenPopup","popupOpen","contentAttributes","hostLanguage","singleLine","inputRef","setEditor","handleInput","FeelersEditor","container","lineWrap","innerHTML","handleClick","classNames","FeelEditor","onFeelToggle","placeholder","variables","feelLanguageContext","builtins","dialect","parserDialect","selection","getSelection","range","ranges","mainIndex","from","to","Editor","extensions","lineNumbers","EditorView","lineWrapping","setVariables","setPlaceholder","FeelIndicator","active","FeelIcon","feel","feelRequiredLabel","feelOptionalLabel","pointerType","FeelIconSvg","ToggleSwitch","switcherLabel","inline","handleInputCallback","ToggleSwitchEntry","NumberField","debounce","displayLabel","max","min","step","validity","valid","parseFloat","spellCheck","autoComplete","NumberFieldEntry","validate","globalError","localError","setLocalError","newValidationError","FeelTextfield","commitValue","onError","OptionalComponent","OptionalFeelInput","editorRef","containerRef","newModelValue","feelActive","isString","startsWith","feelOnlyValue","substring","_setFocus","isPopupOpen","setIsPopupOpen","setFocus","hasFocus","activeElement","selectionStart","handleFeelToggle","handleLocalInput","handleOnBlur","trimmedValue","trim","handleLint","lint","syntaxError","report","handleOpenPopup","isOpen","fire","entryId","sourceElement","once","copyHandler","clipboardData","setData","getData","pasteHandler","data","input","setSelectionRange","OptionalFeelNumberField","OptionalFeelTextArea","OptionalFeelToggleSwitch","OptionalFeelCheckbox","FeelEntry","example","validationError","setValidationError","err","temporaryError","FeelNumberEntry","FeelTextAreaEntry","FeelToggleSwitchEntry","FeelCheckboxEntry","FeelTemplatingEntry","classList","TemplatingEntry","Templating","severity","message","source","prefixIdLabel","List","onAdd","onRemove","restProps","entryRef","elementChanged","useNewItems","addItem","ItemsList","newItem","selector","shouldReset","previousItems","Select","options","option","idx","child","SelectEntry","getOptions","Simple","resizeToContents","TextArea","monospace","autoResize","rows","TextAreaEntry","Textfield","TextfieldEntry","DEFAULT_DEBOUNCE_TIME","debounceInput","debounceDelay","fn","debounceTime","isNumber","_debounce","$inject","createDragger","dragPreview","self","startX","startY","onDragStart","clientX","clientY","dataTransfer","setDragImage","emptyCanvas","onDrag","preventDefault","onEnd","delta","y","call","domify","PopupComponent","globalRef","delayInitialFocus","onClose","onPostActivate","onPostDeactivate","returnFocus","closeOnEscape","focusTrapRef","localRef","popupRef","handleKeydown","handleFocus","activate","left","focusTrap","createFocusTrap","clickOutsideDeactivates","fallbackFocus","returnFocusOnDeactivate","deactivate","Popup","Title","Body","Footer","draggable","showCloseButton","closeButtonTooltip","rest","context","startPosition","newPosition","dragPreviewRef","titleRef","onMove","dx","dy","popupParent","getPopupParent","onMoveStart","bounds","onMoveEnd","onDragEnd","_Fragment","DragIcon","CloseIcon","closest","FEEL_POPUP_WIDTH","FEEL_POPUP_HEIGHT","FeelPopup","links","isAutoCompletionOpen","handleSetReturnFocus","onKeyDownCapture","autoCompletionOpen","link","LaunchIcon","querySelector","getPopupTitle","popupTitle","getPopupPosition","viewportWidth","window","innerWidth","documentElement","clientWidth","viewportHeight","innerHeight","constructor","_eventBus","_config","_isOpen","popupConfig","_openPopup","_closePopup","feelPopupContainer","getFeelPopupLinks","FeelPopupRenderer","_container","_element","_renderPopup","_removePopup","getContainer","body","createElement","appendChild","_emit","render","domNode","removeChild","__init__","feelPopup","feelPopupRenderer"],"mappings":"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"}